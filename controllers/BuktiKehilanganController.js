const a2_0xec77c5=a2_0x140a;(function(_0x22ada9,_0x25d64b){const _0x1ec408=a2_0x140a,_0x22a978=_0x22ada9();while(!![]){try{const _0x53e9ad=parseInt(_0x1ec408(0x156))/0x1*(parseInt(_0x1ec408(0x164))/0x2)+-parseInt(_0x1ec408(0x16e))/0x3+-parseInt(_0x1ec408(0x172))/0x4*(-parseInt(_0x1ec408(0x165))/0x5)+-parseInt(_0x1ec408(0x154))/0x6+-parseInt(_0x1ec408(0x170))/0x7+parseInt(_0x1ec408(0x15f))/0x8+parseInt(_0x1ec408(0x16c))/0x9;if(_0x53e9ad===_0x25d64b)break;else _0x22a978['push'](_0x22a978['shift']());}catch(_0x3ba119){_0x22a978['push'](_0x22a978['shift']());}}}(a2_0x6e74,0x413d3));function a2_0x140a(_0xa7a021,_0x406df6){const _0x6e742=a2_0x6e74();return a2_0x140a=function(_0x140a27,_0x2ccd41){_0x140a27=_0x140a27-0x151;let _0x215e11=_0x6e742[_0x140a27];return _0x215e11;},a2_0x140a(_0xa7a021,_0x406df6);}function a2_0x6e74(){const _0x195e00=['sequelize','845270xAgdol','776915ngRXOR','get','body','length','KEPEGAWAIAN_URL','pegawai','sortby','586017iKXpIE','../models/index','927321xykMlr','createdAt','1309196EnPeGq','GATEWAYE_URL','8WCURDN','/kepegawaian/data-tenaga-audit?get=all&search=','ketua','search','findOne','terjadi\x20error','send','create','user','token','surat_tugas_id','dataValues','&arrid=','pegawai_id','3152370KXYJCt','log','1VicRkJ','findAll','/data-tenaga-audit/','Bearer\x20','data','query','rows','ceil','env','3921880bANZDt','push','BuktiKehilangan','params'];a2_0x6e74=function(){return _0x195e00;};return a2_0x6e74();}const {Op}=require(a2_0xec77c5(0x163)),model=require(a2_0xec77c5(0x16d)),{default:axios}=require('axios'),getPaginationTable=(_0x23f941,_0x463c66)=>{const _0x42025b=a2_0xec77c5,_0x5726a8=_0x463c66?+_0x463c66:0xa,_0x2e35fb=_0x23f941?Math[_0x42025b(0x15d)](_0x23f941-0x1)*_0x5726a8:0x0;return{'limit':_0x5726a8,'offset':_0x2e35fb};},getPagingData=(_0x181946,_0x321d5b,_0x2443e4)=>{const _0x57a3d7=a2_0xec77c5,{count:_0x6ecdd2,rows:_0x1a0a04}=_0x181946,_0x2c632d=_0x321d5b?+_0x321d5b:0x0,_0x3e446c=Math[_0x57a3d7(0x15d)](_0x6ecdd2/_0x2443e4);return{'totalItems':_0x6ecdd2,'data':_0x1a0a04,'totalPages':_0x3e446c,'currentPage':_0x2c632d};},getPagination=(_0x5a21d7,_0x15b469)=>{const _0x28ccb1=a2_0xec77c5,_0x17c004=_0x15b469?+_0x15b469:0xa,_0x337e45=_0x5a21d7?Math[_0x28ccb1(0x15d)](_0x5a21d7-0x1)*_0x17c004:0x0;return{'limit':_0x17c004,'offset':_0x337e45};};module['exports']={async 'index'(_0x210229,_0x42360f){const _0x46faf6=a2_0xec77c5;try{const {page:_0x17e5b6,size:_0x3efbee}=_0x210229['query'],{limit:_0x1c6f96,offset:_0x2ff85e}=getPagination(_0x17e5b6,_0x3efbee);let _0x69bcba=_0x210229[_0x46faf6(0x15b)][_0x46faf6(0x16b)]||_0x46faf6(0x16f),_0x4432e4=_0x210229['query']['orderby']||'desc',_0x16a026=_0x210229['query'][_0x46faf6(0x175)]||'',_0x47b03a={};if(_0x16a026!=''){const _0x1d1fea=await model[_0x46faf6(0x161)]['findAll']({'attributes':[_0x46faf6(0x17c)],'group':[_0x46faf6(0x17c)]});let _0x43d49b=[];for(let _0xce54e7=0x0;_0xce54e7<_0x1d1fea[_0x46faf6(0x168)];_0xce54e7++){const _0x21a2c8=_0x1d1fea[_0xce54e7]['dataValues'];_0x43d49b[_0x46faf6(0x160)](_0x21a2c8[_0x46faf6(0x17c)]);}const _0xdee139=await model[_0x46faf6(0x161)][_0x46faf6(0x157)]({'attributes':[_0x46faf6(0x153)],'group':['pegawai_id']});let _0x491214=[];for(let _0x7cbdb9=0x0;_0x7cbdb9<_0xdee139[_0x46faf6(0x168)];_0x7cbdb9++){const _0xd9f06a=_0xdee139[_0x7cbdb9]['dataValues'];_0x491214[_0x46faf6(0x160)](_0xd9f06a[_0x46faf6(0x153)]);}const [_0x228f80,_0x3e8c73]=await Promise['all']([axios[_0x46faf6(0x166)](process['env'][_0x46faf6(0x171)]+'/pengawasan_internal/surat-tugas?get=all&search='+_0x16a026+_0x46faf6(0x152)+_0x43d49b,{'headers':{'Authorization':_0x46faf6(0x159)+_0x210229[_0x46faf6(0x17b)]}}),axios[_0x46faf6(0x166)](process[_0x46faf6(0x15e)][_0x46faf6(0x171)]+_0x46faf6(0x173)+_0x16a026+_0x46faf6(0x152)+_0x491214,{'headers':{'Authorization':'Bearer\x20'+_0x210229['token']}})]),_0x12823f=_0x228f80['data']['data'],_0x5027f6=_0x3e8c73['data'][_0x46faf6(0x15a)];let _0x334b3e=[];for(let _0x382db7=0x0;_0x382db7<_0x12823f[_0x46faf6(0x168)];_0x382db7++){const _0x32a89b=_0x12823f[_0x382db7];_0x334b3e[_0x46faf6(0x160)](_0x32a89b['id']);}_0x334b3e['length']>0x0&&(_0x47b03a[_0x46faf6(0x17c)]={[Op['in']]:_0x334b3e});let _0x3bb83e=[];for(let _0xefaa8d=0x0;_0xefaa8d<_0x5027f6[_0x46faf6(0x168)];_0xefaa8d++){const _0x2aa15b=_0x5027f6[_0xefaa8d];_0x3bb83e[_0x46faf6(0x160)](_0x2aa15b['id']);}_0x3bb83e[_0x46faf6(0x168)]>0x0&&(_0x47b03a[_0x46faf6(0x153)]={[Op['in']]:_0x3bb83e});}(_0x210229[_0x46faf6(0x17a)]['role_id']!==0x1||_0x210229[_0x46faf6(0x15b)][_0x46faf6(0x166)]&&!_0x210229[_0x46faf6(0x15b)][_0x46faf6(0x166)]['includes']('all'))&&(_0x47b03a[_0x46faf6(0x153)]=_0x210229['user'][_0x46faf6(0x153)]);const _0x8ec8b9=await model[_0x46faf6(0x161)]['findAndCountAll']({'where':_0x47b03a,'order':[[_0x69bcba,_0x4432e4]],'limit':_0x1c6f96,'offset':_0x2ff85e});var _0xe5c29e=[];for(let _0x4e6ed9=0x0;_0x4e6ed9<_0x8ec8b9[_0x46faf6(0x15c)][_0x46faf6(0x168)];_0x4e6ed9++){var _0x3f5507=_0x8ec8b9['rows'][_0x4e6ed9][_0x46faf6(0x151)],_0x35d101={};_0x3f5507['pegawai_id']?(_0x35d101=await axios[_0x46faf6(0x166)](process['env'][_0x46faf6(0x169)]+_0x46faf6(0x158)+_0x3f5507[_0x46faf6(0x153)]),_0x3f5507[_0x46faf6(0x16a)]=_0x35d101[_0x46faf6(0x15a)]['data']):_0x3f5507['pegawai']=_0x35d101,_0xe5c29e[_0x46faf6(0x160)](_0x3f5507);}_0x8ec8b9['rows']=_0xe5c29e;const _0x1bc953=getPagingData(_0x8ec8b9,_0x17e5b6,_0x1c6f96);_0x42360f[_0x46faf6(0x178)]({'status':!![],..._0x1bc953});}catch(_0x25f868){console['log'](_0x25f868),_0x42360f[_0x46faf6(0x178)]({'status':![],'message':'terjadi\x20error'});}},async 'add'(_0x352218,_0x11d1cb){const _0x88e403=a2_0xec77c5;try{var _0x50a27c=_0x352218[_0x88e403(0x167)];(_0x50a27c['pegawai_id']==''||!_0x50a27c[_0x88e403(0x153)])&&(_0x50a27c[_0x88e403(0x153)]=_0x352218['user'][_0x88e403(0x153)]);const _0x5649f6=await model['BuktiKehilangan'][_0x88e403(0x179)](_0x50a27c);_0x11d1cb['send']({'status':!![],'data':_0x5649f6});}catch(_0x288e23){console['log'](_0x288e23),_0x11d1cb[_0x88e403(0x178)]({'status':![],'message':_0x88e403(0x177)});}},async 'detail'(_0x538654,_0x2c79dd){const _0x5110aa=a2_0xec77c5;try{const _0x2c1e76=await model['BuktiKehilangan'][_0x5110aa(0x176)]({'where':{'id':_0x538654[_0x5110aa(0x162)]['id']}});var _0x1f46b3=_0x2c1e76[_0x5110aa(0x151)],_0x2ed7f8={};_0x1f46b3[_0x5110aa(0x153)]?(_0x2ed7f8=await axios[_0x5110aa(0x166)](process['env'][_0x5110aa(0x169)]+'/data-tenaga-audit/'+_0x1f46b3[_0x5110aa(0x153)],{'headers':{'Authorization':_0x5110aa(0x159)+_0x538654['token']}}),_0x1f46b3['pegawai']=_0x2ed7f8['data'][_0x5110aa(0x15a)]):_0x1f46b3[_0x5110aa(0x16a)]=_0x2ed7f8;var _0x40b03b={};_0x1f46b3['ketua_id']?(_0x40b03b=await axios[_0x5110aa(0x166)](process[_0x5110aa(0x15e)]['KEPEGAWAIAN_URL']+_0x5110aa(0x158)+_0x1f46b3['ketua_id'],{'headers':{'Authorization':_0x5110aa(0x159)+_0x538654[_0x5110aa(0x17b)]}}),_0x1f46b3[_0x5110aa(0x174)]=_0x40b03b[_0x5110aa(0x15a)]['data']):_0x1f46b3[_0x5110aa(0x174)]=_0x40b03b,_0x2c79dd[_0x5110aa(0x178)]({'status':!![],'data':_0x1f46b3});}catch(_0x190e00){console['log'](_0x190e00),_0x2c79dd[_0x5110aa(0x178)]({'status':![],'message':_0x5110aa(0x177)});}},async 'update'(_0x4c6a26,_0xc2c50e){const _0x4e5dca=a2_0xec77c5;try{var _0x8e839=_0x4c6a26[_0x4e5dca(0x167)];(_0x8e839['pegawai_id']==''||!_0x8e839[_0x4e5dca(0x153)])&&(_0x8e839['pegawai_id']=_0x4c6a26[_0x4e5dca(0x17a)][_0x4e5dca(0x153)]);const _0x23d8e3=await model['BuktiKehilangan']['update'](_0x8e839,{'where':{'id':_0x4c6a26[_0x4e5dca(0x162)]['id']}});_0xc2c50e[_0x4e5dca(0x178)]({'status':!![],'data':_0x23d8e3});}catch(_0x5a2fb7){console[_0x4e5dca(0x155)](_0x5a2fb7),_0xc2c50e[_0x4e5dca(0x178)]({'status':![],'message':'terjadi\x20error'});}},async 'delete'(_0x3ab962,_0x30faaa){const _0x47d84e=a2_0xec77c5;try{const _0x4f30cb=await model[_0x47d84e(0x161)]['destroy']({'where':{'id':_0x3ab962[_0x47d84e(0x162)]['id']}});_0x30faaa[_0x47d84e(0x178)]({'status':!![],'data':_0x4f30cb});}catch(_0x45c486){console['log'](_0x45c486),_0x30faaa[_0x47d84e(0x178)]({'status':![],'message':_0x47d84e(0x177)});}}};