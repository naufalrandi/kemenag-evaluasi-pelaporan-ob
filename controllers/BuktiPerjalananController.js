function _0x4df5(_0x2edadc,_0x2048a8){const _0x33e43c=_0x33e4();return _0x4df5=function(_0x4df530,_0x288447){_0x4df530=_0x4df530-0x1d6;let _0x48d38f=_0x33e43c[_0x4df530];return _0x48d38f;},_0x4df5(_0x2edadc,_0x2048a8);}const _0x497841=_0x4df5;function _0x33e4(){const _0x5d4eb3=['desc','Kantor','status_bendahara_tgl','transportasi_data','transport\x20-\x20jakarta','token','bank','/pengawasan_internal/surat-tugas/','list_pengeluaran','role_name','evalap_id','bendahara_id','status','DKI','FormPembayaranPenagihan','form_bukti_perjalanan','uraian','status_ppk','send','Disetujui','ppk_id','kepada','SuratTugas','1157786GKXFAa','nomor_surat','Pengembalian\x20kelebihan\x20uang\x20muka\x20ke\x20negara','uang_muka_transportasi','4716210NKzWia','Menghapus\x20Form\x20Bukti\x20Perjalanan\x20Dinas','1603509rmXYvM','and','../models','&arrid=','isSameOrAfter','push','user','Form\x20Bukti\x20Perjalanan\x20Dinas','Ketua\x20Tim','pegawai','pembuat_komitmen_id','Anggota','Verifikasi\x20Perjalanan\x20Dinas','detail','map','find','10uraKYi','isSameOrBefore','/pdf_tte/upload-dokumen-ttd','jabatan','../models/pengawasan-internal/index','verifikator','GATEWAYE_URL','DD-MM-YYYY','FormDpr','COUNT','Range\x20tanggal\x20','Pengembalian','no_rek','ketua_id','1357516jKTAPT','mak','history_revisi','revisi','passphrase','updated','RevisiBuktiPerjalanan','surat_tugas_id','message','Anda\x20belum\x20terdaftar\x20TTE\x20/\x20Passphrase\x20anda\x20salah','axios','Ditolak','status_evalap_tgl','bendahara','query','destroy','/kepegawaian/data-tenaga-audit/','KEPEGAWAIAN_URL','878574wVKGwT','contains','sequelize','48zsztvw','Bukti\x20perjalanan\x20dengan\x20ST\x20dan\x20pegawai\x20Sudah\x20Ada','now','status_ketua_tgl','surat_tugas','Bearer\x20','log','/kepegawaian/data-tenaga-audit?get=all&search=','54548Rptkgn','18nYkIiz','old','ketua','selesai','reduce','dibayar_oleh','filter','total_bukti_perjalanan','uang_muka','SuratPerjalananDinas','findAll','1kPckhL','51799HppZVo','tanggal_selesai','TenagaAudit','exports','createdAt','format','pegawai_id','update','ITJEN\x20KEMENAG','body','jumlah_dibayarkan','Verifikasi\x20dan\x20Pelaporan','data','Menunggu','length','col','uang_penginapan_data','error','\x20realisasi\x20sudah\x20ada\x20atau\x20beririsan\x20dengan\x20range\x20tanggal\x20yang\x20lain','../helpers/jwt','create','evalap','../models/index','transfer','YYYYMMDDHHmmss','../models/keuangan/index','ceil','params','jenis','status_evalap','Pending','findOne','status_bendahara','id_tte','tanggal_mulai','terjadi\x20error','YYYY-MM-DD\x20HH:mm:ss','verif-perjadin','bukti_perjalanan','total','post','/pdf_tte/sign-ttd','nama','env','Menambah\x20Form\x20Bukti\x20Perjalanan\x20Dinas','\x20sd\x20','Berhasil','get','dataValues','/eval_pelaporan/form-bukti-perjalanan/','/pengawasan_internal/surat-tugas?get=all&search=','ppk','Form\x20Bukti\x20Perjalanan','usulan_id','findAndCountAll','Melakukan\x20Revisi\x20Form\x20Bukti\x20Perjalanan\x20Dinas','Trasfer','BuktiPerjalanan','tanggal_realisasi_data','/pdf_tte/generate','../models/kepegawaian/index','/data-tenaga-audit/','all','sisa_pengembalian','3384KjgxTn','status_ketua'];_0x33e4=function(){return _0x5d4eb3;};return _0x33e4();}(function(_0x20edd0,_0x380269){const _0x3bdbf4=_0x4df5,_0x7f9d3b=_0x20edd0();while(!![]){try{const _0x4f8eed=-parseInt(_0x3bdbf4(0x25e))/0x1*(-parseInt(_0x3bdbf4(0x235))/0x2)+-parseInt(_0x3bdbf4(0x217))/0x3+parseInt(_0x3bdbf4(0x252))/0x4*(-parseInt(_0x3bdbf4(0x227))/0x5)+-parseInt(_0x3bdbf4(0x247))/0x6+parseInt(_0x3bdbf4(0x211))/0x7*(parseInt(_0x3bdbf4(0x24a))/0x8)+parseInt(_0x3bdbf4(0x253))/0x9*(parseInt(_0x3bdbf4(0x215))/0xa)+-parseInt(_0x3bdbf4(0x25f))/0xb*(parseInt(_0x3bdbf4(0x1f8))/0xc);if(_0x4f8eed===_0x380269)break;else _0x7f9d3b['push'](_0x7f9d3b['shift']());}catch(_0x513556){_0x7f9d3b['push'](_0x7f9d3b['shift']());}}}(_0x33e4,0x8d2c4));const {Op,where}=require('sequelize'),model=require(_0x497841(0x275)),modelPengawasan=require(_0x497841(0x22b)),modelKepegawaian=require(_0x497841(0x1f4)),modelKeuangan=require(_0x497841(0x278)),{default:axios}=require(_0x497841(0x23f)),{sendNotif,checkNik,getSuratTugas}=require('../helpers/custom'),moment=require('moment'),{encodeJwt,decodeJwt}=require(_0x497841(0x272)),{PegawaiBendahara}=require(_0x497841(0x219)),sequelize=require(_0x497841(0x249)),getPaginationTable=(_0x374e59,_0x3bd8c1)=>{const _0x49f00f=_0x3bd8c1?+_0x3bd8c1:0xa,_0x1db9af=_0x374e59?Math['ceil'](_0x374e59-0x1)*_0x49f00f:0x0;return{'limit':_0x49f00f,'offset':_0x1db9af};},transformRevisiPerjalanan=async _0x4e650b=>{const _0x17138a=_0x497841,_0x5f23c1=await decodeJwt(_0x4e650b['old']),_0x4243f5=await decodeJwt(_0x4e650b[_0x17138a(0x23a)]),_0x52a3c8={};for(const _0x4c3c7f in _0x5f23c1){_0x4243f5[_0x4c3c7f]&&_0x5f23c1[_0x4c3c7f]&&_0x5f23c1[_0x4c3c7f]!==_0x4243f5[_0x4c3c7f]&&(_0x52a3c8[_0x4c3c7f]={'old':_0x5f23c1[_0x4c3c7f],'updated':_0x4243f5[_0x4c3c7f]});}return{..._0x4e650b instanceof model[_0x17138a(0x23b)]?_0x4e650b[_0x17138a(0x1e8)]:_0x4e650b,'old':_0x5f23c1,'updated':_0x4243f5,'changes':_0x52a3c8};},pdf_tte=async(_0xfb0b2b,_0x538508,_0x4ec0e,_0x583888,_0x4dab35=![])=>{const _0x14a0d8=_0x497841;try{const _0x35b0d9=await axios[_0x14a0d8(0x1e7)](process[_0x14a0d8(0x1e3)][_0x14a0d8(0x22d)]+_0x14a0d8(0x1e9)+_0xfb0b2b,{'headers':{'Authorization':_0x14a0d8(0x24f)+_0x538508['token']}});console[_0x14a0d8(0x250)](_0x35b0d9[_0x14a0d8(0x26b)]['data']);var _0x592e70=_0x35b0d9['data'][_0x14a0d8(0x26b)];console[_0x14a0d8(0x250)](_0x592e70);var _0x4e31a1=_0x592e70['url_pdf'],_0x39280a=_0x592e70[_0x14a0d8(0x1d9)];_0x4dab35&&(_0x4e31a1=null,_0x39280a=null);if(!_0x4e31a1){const _0x374c9e=await axios['post'](process['env'][_0x14a0d8(0x22d)]+_0x14a0d8(0x1f3),{'folder':_0x14a0d8(0x1dd),'filename':_0x592e70[_0x14a0d8(0x24e)][_0x14a0d8(0x212)]+'-'+moment()[_0x14a0d8(0x264)](_0x14a0d8(0x277)),'data':_0x592e70},{'headers':{'Authorization':_0x14a0d8(0x24f)+_0x538508[_0x14a0d8(0x1ff)]}});_0x4e31a1=_0x374c9e[_0x14a0d8(0x26b)][_0x14a0d8(0x26b)];}if(!_0x39280a){const _0x417825=await axios[_0x14a0d8(0x1e0)](process[_0x14a0d8(0x1e3)][_0x14a0d8(0x22d)]+_0x14a0d8(0x229),{'filename':_0x4e31a1,'regarding':'Verifikasi\x20Perjalanan\x20Dinas','type':_0x14a0d8(0x223),'paper_type':'P'},{'headers':{'Authorization':_0x14a0d8(0x24f)+_0x538508['token']}});_0x39280a=_0x417825['data'][_0x14a0d8(0x26b)]['id'];}let _0x12d5dc=null;if(_0x538508[_0x14a0d8(0x21d)][_0x14a0d8(0x265)]){const _0x4860f2=await axios[_0x14a0d8(0x1e7)](process[_0x14a0d8(0x1e3)][_0x14a0d8(0x246)]+_0x14a0d8(0x1f5)+_0x538508[_0x14a0d8(0x21d)][_0x14a0d8(0x265)],{'headers':{'Authorization':_0x14a0d8(0x24f)+_0x538508[_0x14a0d8(0x1ff)]}});_0x12d5dc=_0x4860f2[_0x14a0d8(0x26b)][_0x14a0d8(0x26b)];}const _0x4c3bcb=await axios[_0x14a0d8(0x1e0)](process['env']['GATEWAYE_URL']+_0x14a0d8(0x1e1),{'filename':_0x4e31a1,'nik':_0x12d5dc['nik'],'passphrase':_0x4ec0e[_0x14a0d8(0x239)],'document_id':_0x39280a,'anchor':_0x583888,'is_final':'0'},{'headers':{'Authorization':_0x14a0d8(0x24f)+_0x538508[_0x14a0d8(0x1ff)]}});return await Promise[_0x14a0d8(0x1f6)]([model[_0x14a0d8(0x1f1)][_0x14a0d8(0x266)]({'url_pdf':_0x4e31a1,'url_pdf_tte':_0x4e31a1,'id_tte':_0x39280a},{'where':{'id':_0xfb0b2b}})]),console['log']({'url_pdf':_0x4e31a1,'url_pdf_tte':_0x4e31a1,'id_tte':_0x39280a}),!![];}catch(_0x119010){return console[_0x14a0d8(0x250)](_0x119010),![];}},getPagingData=(_0xee5237,_0x532ea8,_0xde0626)=>{const _0x531e08=_0x497841,{count:_0x2bc1b3,rows:_0x58de1b}=_0xee5237,_0x4ed3ab=_0x532ea8?+_0x532ea8:0x0,_0x1e1891=Math[_0x531e08(0x279)](_0x2bc1b3/_0xde0626);return{'totalItems':_0x2bc1b3,'data':_0x58de1b,'totalPages':_0x1e1891,'currentPage':_0x4ed3ab};},getPagination=(_0x469257,_0x23933c)=>{const _0x2b2cea=_0x497841,_0x449b43=_0x23933c?+_0x23933c:0xa,_0x38e16b=_0x469257?Math[_0x2b2cea(0x279)](_0x469257-0x1)*_0x449b43:0x0;return{'limit':_0x449b43,'offset':_0x38e16b};};module[_0x497841(0x262)]={async 'index'(_0x3b7bf7,_0x3c5a08){const _0x40c6cc=_0x497841;try{const {page:page=0x1,size:size=0xa,sortby:sortby=_0x40c6cc(0x263),orderby:orderby='desc',search:_0x3a9b99,byuser:_0x4dedc9,step:_0x5700f9}=_0x3b7bf7[_0x40c6cc(0x243)];let _0x57605a={};_0x5700f9==_0x40c6cc(0x255)&&(_0x57605a={'status_ketua':{[Op['or']]:['Menunggu',_0x40c6cc(0x240),null]}});_0x5700f9==_0x40c6cc(0x274)&&(_0x57605a={[Op[_0x40c6cc(0x218)]]:[{'status_ketua':'Disetujui'},{'status_evalap':{[Op['or']]:[_0x40c6cc(0x26c),_0x40c6cc(0x240),null]}}]});_0x5700f9==_0x40c6cc(0x1eb)&&(_0x57605a={[Op[_0x40c6cc(0x218)]]:[{'status_ketua':_0x40c6cc(0x20d)},{'status_evalap':_0x40c6cc(0x20d)},{'status_ppk':{[Op['or']]:[_0x40c6cc(0x26c),_0x40c6cc(0x240),null]}}]});_0x5700f9==_0x40c6cc(0x242)&&(_0x57605a={[Op['and']]:[{'status_ketua':_0x40c6cc(0x20d)},{'status_evalap':_0x40c6cc(0x20d)},{'status_ppk':_0x40c6cc(0x20d)},{'status_bendahara':{[Op['or']]:[_0x40c6cc(0x26c),_0x40c6cc(0x240),null]}}]});_0x5700f9==_0x40c6cc(0x256)&&(_0x57605a={[Op[_0x40c6cc(0x218)]]:[{'status_ketua':'Disetujui'},{'status_evalap':_0x40c6cc(0x20d)},{'status_ppk':_0x40c6cc(0x20d)},{'status_bendahara':_0x40c6cc(0x20d)}]});let _0x20fbb4={};if(_0x3a9b99){const _0xde4ee1=await model['BuktiPerjalanan'][_0x40c6cc(0x25d)]({'attributes':[_0x40c6cc(0x23c)],'group':[_0x40c6cc(0x23c)]});let _0x13b992=[];for(let _0x48f083=0x0;_0x48f083<_0xde4ee1[_0x40c6cc(0x26d)];_0x48f083++){const _0x9948fd=_0xde4ee1[_0x48f083][_0x40c6cc(0x1e8)];_0x13b992['push'](_0x9948fd[_0x40c6cc(0x23c)]);}const _0x4c4cde=await model[_0x40c6cc(0x1f1)]['findAll']({'attributes':[_0x40c6cc(0x265)],'group':[_0x40c6cc(0x265)]});let _0x38cd78=[];for(let _0x16f9e4=0x0;_0x16f9e4<_0x4c4cde[_0x40c6cc(0x26d)];_0x16f9e4++){const _0x4f4b9b=_0x4c4cde[_0x16f9e4][_0x40c6cc(0x1e8)];_0x38cd78['push'](_0x4f4b9b[_0x40c6cc(0x265)]);}const [_0x31c4fb,_0x3a32d0]=await Promise[_0x40c6cc(0x1f6)]([axios[_0x40c6cc(0x1e7)](process[_0x40c6cc(0x1e3)]['GATEWAYE_URL']+'/pengawasan_internal/surat-tugas?get=all&search='+_0x3a9b99+_0x40c6cc(0x21a)+_0x13b992,{'headers':{'Authorization':_0x40c6cc(0x24f)+_0x3b7bf7[_0x40c6cc(0x1ff)]}}),axios[_0x40c6cc(0x1e7)](process[_0x40c6cc(0x1e3)][_0x40c6cc(0x22d)]+_0x40c6cc(0x251)+_0x3a9b99+_0x40c6cc(0x21a)+_0x38cd78,{'headers':{'Authorization':_0x40c6cc(0x24f)+_0x3b7bf7[_0x40c6cc(0x1ff)]}})]),_0x37b2f0=_0x31c4fb[_0x40c6cc(0x26b)][_0x40c6cc(0x26b)],_0x584b0a=_0x3a32d0[_0x40c6cc(0x26b)][_0x40c6cc(0x26b)];let _0x430e16=[];for(let _0x1ca30f=0x0;_0x1ca30f<_0x37b2f0['length'];_0x1ca30f++){const _0x410e33=_0x37b2f0[_0x1ca30f];_0x430e16[_0x40c6cc(0x21c)](_0x410e33['id']);}_0x430e16[_0x40c6cc(0x26d)]>0x0&&(_0x57605a[_0x40c6cc(0x23c)]={[Op['in']]:_0x430e16});let _0x52e104=[];for(let _0x14b3d2=0x0;_0x14b3d2<_0x584b0a['length'];_0x14b3d2++){const _0xe27eb9=_0x584b0a[_0x14b3d2];_0x52e104[_0x40c6cc(0x21c)](_0xe27eb9['id']);}_0x52e104[_0x40c6cc(0x26d)]>0x0&&(_0x57605a['pegawai_id']={[Op['in']]:_0x52e104});}_0x4dedc9&&(_0x57605a['pegawai_id']=_0x3b7bf7[_0x40c6cc(0x21d)][_0x40c6cc(0x265)]);if(_0x3b7bf7['user']['role_id']!==0x1&&_0x3b7bf7[_0x40c6cc(0x243)][_0x40c6cc(0x1e7)]!=='all'){if(_0x4dedc9)_0x57605a[_0x40c6cc(0x265)]=_0x3b7bf7[_0x40c6cc(0x21d)][_0x40c6cc(0x265)];else{let _0x154647=[];const _0x568509=await model[_0x40c6cc(0x1f1)][_0x40c6cc(0x25d)]({'raw':!![]});for(let _0x1c1e10=0x0;_0x1c1e10<_0x568509[_0x40c6cc(0x26d)];_0x1c1e10++){const _0x46e231=_0x568509[_0x1c1e10];if(_0x46e231[_0x40c6cc(0x1f9)]!==_0x40c6cc(0x20d)||_0x46e231[_0x40c6cc(0x1f9)]===_0x40c6cc(0x20d))try{const _0x35da59=await modelPengawasan[_0x40c6cc(0x210)]['findOne']({'where':{'id':_0x46e231['surat_tugas_id'],'kepada':{[Op[_0x40c6cc(0x248)]]:[{'pegawai_id':_0x3b7bf7['user'][_0x40c6cc(0x265)]}]}}});_0x35da59&&_0x35da59['id']===_0x46e231['surat_tugas_id']&&_0x154647[_0x40c6cc(0x21c)](_0x46e231['id']);}catch(_0x33201a){console[_0x40c6cc(0x250)](_0x33201a);}else{if(_0x46e231['status_ketua']===_0x40c6cc(0x20d)&&_0x3b7bf7[_0x40c6cc(0x21d)]['role_name']===_0x40c6cc(0x26a)&&_0x46e231[_0x40c6cc(0x27c)]!==_0x40c6cc(0x20d))_0x154647[_0x40c6cc(0x21c)](_0x46e231['id']);else{if(_0x46e231[_0x40c6cc(0x1f9)]==='Disetujui'&&_0x46e231[_0x40c6cc(0x27c)]===_0x40c6cc(0x20d)&&_0x46e231[_0x40c6cc(0x20b)]!==_0x40c6cc(0x20d))try{const _0x49be81=await modelPengawasan[_0x40c6cc(0x210)][_0x40c6cc(0x1d7)]({'where':{'id':_0x46e231['surat_tugas_id']}});_0x49be81&&_0x49be81[_0x40c6cc(0x20e)]===_0x3b7bf7[_0x40c6cc(0x21d)][_0x40c6cc(0x265)]&&_0x154647[_0x40c6cc(0x21c)](_0x46e231['id']);}catch(_0x752593){console['log'](_0x752593);}}}_0x57605a[Op['or']]=[{'pegawai_id':_0x3b7bf7['user'][_0x40c6cc(0x265)]},{'id':{[Op['in']]:_0x154647}}];}}}const _0x48de86={'where':_0x57605a,'order':[[sortby,orderby]],'limit':parseInt(size),'offset':(parseInt(page)-0x1)*parseInt(size)},{count:_0x4b04d7,rows:_0x416a2f}=await model[_0x40c6cc(0x1f1)][_0x40c6cc(0x1ee)]({..._0x48de86,'raw':!![]}),_0x1011a1=await Promise[_0x40c6cc(0x1f6)](_0x416a2f[_0x40c6cc(0x225)](async _0x1fd427=>{const _0x2c9773=_0x40c6cc;_0x1fd427['pegawai']=null;if(_0x1fd427[_0x2c9773(0x265)])try{const _0x35cda0=await modelKepegawaian['TenagaAudit'][_0x2c9773(0x1d7)]({'where':{'id':_0x1fd427[_0x2c9773(0x265)]}});_0x1fd427['pegawai']=_0x35cda0;}catch(_0x8fa37c){console[_0x2c9773(0x250)](_0x8fa37c);}_0x1fd427[_0x2c9773(0x24e)]=null;if(_0x1fd427[_0x2c9773(0x23c)])try{const _0x350287=await modelPengawasan[_0x2c9773(0x210)][_0x2c9773(0x1d7)]({'where':{'id':_0x1fd427['surat_tugas_id']}});_0x1fd427[_0x2c9773(0x24e)]=_0x350287;}catch(_0x310f35){}return _0x1fd427[_0x2c9773(0x1d8)]==_0x2c9773(0x20d)&&_0x1fd427[_0x2c9773(0x20b)]==null&&_0x1fd427['status_evalap_tgl']!=null&&(_0x1fd427[_0x2c9773(0x20b)]='Disetujui',await model[_0x2c9773(0x1f1)][_0x2c9773(0x266)]({'status_ppk':'Disetujui'},{'where':{'id':_0x1fd427['id']}})),_0x1fd427;})),_0x167090=getPagingData({'count':_0x4b04d7,'rows':_0x1011a1},page,parseInt(size));_0x3c5a08[_0x40c6cc(0x20c)]({'status':!![],..._0x167090});}catch(_0x5de0fd){console[_0x40c6cc(0x250)](_0x5de0fd),_0x3c5a08[_0x40c6cc(0x20c)]({'status':![],'message':'terjadi\x20error'});}},async 'add'(_0x4903d3,_0xbb5b40){const _0x4f5f6c=_0x497841;try{const _0x416879={..._0x4903d3['body']};(_0x416879['pegawai_id']===''||!_0x416879[_0x4f5f6c(0x265)])&&(_0x416879[_0x4f5f6c(0x265)]=_0x4903d3[_0x4f5f6c(0x21d)][_0x4f5f6c(0x265)]);var _0x5ab7e9=_0x416879['tanggal_realisasi_data'];let _0x4536ab=![];const _0x472d0a=await model['BuktiPerjalanan'][_0x4f5f6c(0x25d)]({'where':{'pegawai_id':_0x416879[_0x4f5f6c(0x265)]}});for(let _0x177038=0x0;_0x177038<_0x472d0a[_0x4f5f6c(0x26d)];_0x177038++){const _0x4b3d51=_0x472d0a[_0x177038][_0x4f5f6c(0x1e8)];if(_0x4b3d51['id']!=_0x4903d3[_0x4f5f6c(0x27a)]['id'])for(let _0x1534a6=0x0;_0x1534a6<_0x4b3d51[_0x4f5f6c(0x1f2)][_0x4f5f6c(0x26d)];_0x1534a6++){const _0xe8fa1e=_0x4b3d51[_0x4f5f6c(0x1f2)][_0x1534a6];var _0x2739b3=moment(_0xe8fa1e[_0x4f5f6c(0x1da)]),_0x4d05a5=moment(_0xe8fa1e[_0x4f5f6c(0x260)]);for(let _0x5a8874=0x0;_0x5a8874<_0x5ab7e9[_0x4f5f6c(0x26d)];_0x5a8874++){const _0x455641=_0x5ab7e9[_0x5a8874];var _0x19439b=moment(_0x455641[_0x4f5f6c(0x1da)]),_0x28498d=moment(_0x455641[_0x4f5f6c(0x260)]);if(_0x19439b['isSameOrAfter'](_0x2739b3)&&_0x19439b['isSameOrBefore'](_0x4d05a5)||_0x28498d[_0x4f5f6c(0x21b)](_0x2739b3)&&_0x28498d['isSameOrBefore'](_0x4d05a5)){_0x4536ab=!![],conflict_mulai=_0x19439b,conflict_selesai=_0x28498d;break;}}}}if(!_0x4536ab){const _0x27f0bf=await model[_0x4f5f6c(0x1f1)][_0x4f5f6c(0x1d7)]({'where':{'surat_tugas_id':_0x416879[_0x4f5f6c(0x23c)],'pegawai_id':_0x416879[_0x4f5f6c(0x265)]}});if(_0x27f0bf)return _0xbb5b40['send']({'status':![],'message':_0x4f5f6c(0x24b)});else{const _0x12d755=await model[_0x4f5f6c(0x1f1)]['create'](_0x416879);return await sendNotif(_0x4f5f6c(0x209),_0x12d755['id'],_0x4903d3[_0x4f5f6c(0x21d)][_0x4f5f6c(0x265)],_0x4f5f6c(0x21e),_0x4f5f6c(0x1e4),_0x4903d3['token']),_0xbb5b40[_0x4f5f6c(0x20c)]({'status':!![],'data':_0x12d755});}}else _0xbb5b40[_0x4f5f6c(0x20c)]({'status':![],'message':'Range\x20tanggal\x20'+conflict_mulai[_0x4f5f6c(0x264)]('DD-MM-YYYY')+_0x4f5f6c(0x1e5)+conflict_selesai[_0x4f5f6c(0x264)](_0x4f5f6c(0x22e))+_0x4f5f6c(0x271)});}catch(_0x681f4c){return console['error'](_0x681f4c),_0xbb5b40['status'](0x190)[_0x4f5f6c(0x20c)]({'status':![],'message':_0x4f5f6c(0x1db)});}},async 'detail'(_0x5cb2d1,_0x20aedd){const _0x1852ed=_0x497841;try{const {id:_0x1e2e7e}=_0x5cb2d1[_0x1852ed(0x27a)],_0x338361=await model[_0x1852ed(0x1f1)][_0x1852ed(0x1d7)]({'where':{'id':_0x1e2e7e},'include':[{'model':model[_0x1852ed(0x23b)],'as':_0x1852ed(0x237)}]});let _0x1c1293=_0x338361?_0x338361[_0x1852ed(0x1e8)]:{};!_0x1c1293&&_0x20aedd[_0x1852ed(0x20c)]({'status':![],'message':'data\x20tidak\x20ditemukan'});if(_0x1c1293['transportasi_data']){const _0x11ffc2=_0x1c1293['transportasi_data'][_0x1852ed(0x259)](_0x15d57e=>_0x15d57e[_0x1852ed(0x258)]==='Kantor')[_0x1852ed(0x257)]((_0x4fb8c0,_0x24290b)=>_0x4fb8c0+_0x24290b[_0x1852ed(0x1df)],0x0);_0x1c1293[_0x1852ed(0x214)]=_0x11ffc2;}_0x1c1293[_0x1852ed(0x24e)]=null;if(_0x1c1293[_0x1852ed(0x23c)])try{_0x1c1293['surat_tugas']=await getSuratTugas(_0x1c1293['surat_tugas_id']),_0x1c1293[_0x1852ed(0x20e)]=_0x1c1293['surat_tugas'][_0x1852ed(0x20e)];}catch(_0x346fbc){}_0x1c1293[_0x1852ed(0x220)]=null;if(_0x1c1293[_0x1852ed(0x265)])try{const _0x46efe7=await modelKepegawaian[_0x1852ed(0x261)][_0x1852ed(0x1d7)]({'where':{'id':_0x1c1293[_0x1852ed(0x265)]}});_0x1c1293[_0x1852ed(0x220)]=_0x46efe7;}catch(_0x44fe6a){}_0x1c1293[_0x1852ed(0x255)]=null;if(_0x1c1293['ketua_id'])try{const _0x14f569=await modelKepegawaian[_0x1852ed(0x261)][_0x1852ed(0x1d7)]({'where':{'id':_0x1c1293['ketua_id']}});_0x1c1293[_0x1852ed(0x255)]=_0x14f569;}catch(_0x478874){}_0x1c1293[_0x1852ed(0x274)]=null;if(_0x1c1293[_0x1852ed(0x204)])try{const _0x18f6f5=await modelKepegawaian['TenagaAudit'][_0x1852ed(0x1d7)]({'where':{'id':_0x1c1293[_0x1852ed(0x204)]}});_0x1c1293['evalap']=_0x18f6f5;}catch(_0x5916da){}_0x1c1293[_0x1852ed(0x1eb)]=null;if(_0x1c1293[_0x1852ed(0x20e)])try{const _0x120c0d=await modelKepegawaian[_0x1852ed(0x261)][_0x1852ed(0x1d7)]({'where':{'id':_0x1c1293[_0x1852ed(0x20e)]}});_0x1c1293['ppk']=_0x120c0d;}catch(_0x3699d0){}let _0x6488e5=await PegawaiBendahara[_0x1852ed(0x1d7)]({'where':{[Op['and']]:[{'keterangan':_0x1852ed(0x1ec)},{'utama':!![]}]}});_0x1c1293[_0x1852ed(0x242)]=null;if(_0x6488e5)try{let _0x4c93fa=_0x6488e5[_0x1852ed(0x1e8)];_0x4c93fa[_0x1852ed(0x220)]=null;const _0x41dd67=await modelKepegawaian['TenagaAudit'][_0x1852ed(0x1d7)]({'where':{'id':_0x6488e5[_0x1852ed(0x265)]}});_0x4c93fa['pegawai']=_0x41dd67,_0x1c1293['bendahara']=_0x6488e5,_0x1c1293['bendahara_id']=_0x6488e5[_0x1852ed(0x265)];}catch(_0x51211c){}_0x1c1293[_0x1852ed(0x237)]=await Promise[_0x1852ed(0x1f6)](_0x1c1293[_0x1852ed(0x237)]['map'](transformRevisiPerjalanan));const _0x565157=await model[_0x1852ed(0x23b)][_0x1852ed(0x1d7)]({'where':{'bukti_perjalanan_id':_0x1e2e7e}});return _0x565157&&(_0x565157[_0x1852ed(0x1e8)][_0x1852ed(0x254)]=await decodeJwt(_0x565157[_0x1852ed(0x1e8)][_0x1852ed(0x254)]),_0x565157[_0x1852ed(0x1e8)]['updated']=await decodeJwt(_0x565157[_0x1852ed(0x1e8)][_0x1852ed(0x23a)]),_0x1c1293={..._0x1c1293,..._0x565157[_0x1852ed(0x1e8)][_0x1852ed(0x23a)]},_0x1c1293[_0x1852ed(0x238)]=_0x565157[_0x1852ed(0x1e8)]),(!_0x1c1293[_0x1852ed(0x1f7)]||parseInt(_0x1c1293['sisa_pengembalian']||0x0)==0x0)&&(_0x1c1293[_0x1852ed(0x1f7)]=parseInt(_0x1c1293[_0x1852ed(0x269)]||0x0)-(parseInt(_0x1c1293[_0x1852ed(0x25b)]||0x0)+parseInt(_0x1c1293[_0x1852ed(0x214)]||0x0))),_0x1c1293['status_bendahara']=='Disetujui'&&_0x1c1293[_0x1852ed(0x20b)]==null&&_0x1c1293['status_evalap_tgl']!=null&&(_0x1c1293[_0x1852ed(0x20b)]=_0x1852ed(0x20d)),_0x20aedd[_0x1852ed(0x206)](0xc8)[_0x1852ed(0x20c)]({'status':!![],'data':_0x1c1293});}catch(_0x46feee){return console[_0x1852ed(0x250)](_0x46feee),_0x20aedd[_0x1852ed(0x206)](0x1f4)['send']({'status':![],'message':'terjadi\x20error'});}},async 'detail_cek'(_0x3fd07e,_0x271557){const _0x400b79=_0x497841;try{const _0x32d5ae=await model[_0x400b79(0x1f1)][_0x400b79(0x1d7)]({'where':{'pegawai_id':_0x3fd07e[_0x400b79(0x268)][_0x400b79(0x265)],'surat_tugas_id':_0x3fd07e['body']['surat_tugas_id']}});_0x271557[_0x400b79(0x20c)]({'status':!![],'data':_0x32d5ae});}catch(_0x3d0aca){console[_0x400b79(0x250)](_0x3d0aca),_0x271557[_0x400b79(0x206)](0x190)[_0x400b79(0x20c)]({'status':![],'message':_0x400b79(0x1db)});}},async 'detail_perjadin_dpr'(_0x7400df,_0x410b08){const _0x41d852=_0x497841;try{const _0x4f0e85=await model[_0x41d852(0x1f1)][_0x41d852(0x1d7)]({'where':{'id':_0x7400df[_0x41d852(0x27a)]['id']}}),_0x4d1fd0=_0x4f0e85?_0x4f0e85[_0x41d852(0x1e8)]:{},[_0x5a87d5,_0x4f396a]=await Promise['all']([_0x4d1fd0[_0x41d852(0x265)]?modelKepegawaian[_0x41d852(0x261)][_0x41d852(0x1d7)]({'where':{'id':_0x4d1fd0['pegawai_id']}}):null,_0x4d1fd0[_0x41d852(0x23c)]?axios[_0x41d852(0x1e7)](process[_0x41d852(0x1e3)][_0x41d852(0x22d)]+_0x41d852(0x201)+_0x4f0e85[_0x41d852(0x23c)],{'headers':{'Authorization':_0x41d852(0x24f)+_0x7400df[_0x41d852(0x1ff)]}}):null]);_0x4d1fd0['pegawai']=_0x5a87d5?_0x5a87d5:{},_0x4d1fd0[_0x41d852(0x24e)]=_0x4f396a?_0x4f396a[_0x41d852(0x26b)][_0x41d852(0x26b)]:{};const _0x35f100=await model[_0x41d852(0x22f)][_0x41d852(0x1d7)]({'where':{'surat_tugas_id':_0x4d1fd0[_0x41d852(0x23c)],'pegawai_id':_0x7400df['user'][_0x41d852(0x265)]}});let _0x435b3a=_0x35f100;if(_0x35f100){_0x435b3a=_0x35f100[_0x41d852(0x1e8)];const [_0x2a1186]=await Promise[_0x41d852(0x1f6)]([_0x435b3a[_0x41d852(0x221)]?modelKepegawaian['TenagaAudit']['findOne']({'where':{'id':_0x435b3a[_0x41d852(0x221)]}}):null]),_0x48950d=await Promise[_0x41d852(0x1f6)](_0x435b3a['list_pengeluaran'][_0x41d852(0x225)](async _0x1ed3ee=>{const _0x375f42=_0x41d852,_0xff9f5a=_0x1ed3ee[_0x375f42(0x20a)]?_0x1ed3ee[_0x375f42(0x20a)]:_0x1ed3ee['Uraian'];var _0x22ba5d=await model['TemplatePengeluaran']['findOne']({'where':{'detail':_0xff9f5a}});return _0x22ba5d&&(_0x1ed3ee[_0x375f42(0x20a)]=_0x22ba5d[_0x375f42(0x224)]),_0x1ed3ee;}));_0x435b3a[_0x41d852(0x202)]=_0x48950d,_0x435b3a['pembuat_komitmen']=_0x2a1186?_0x2a1186:{},_0x435b3a[_0x41d852(0x220)]=_0x5a87d5?_0x5a87d5:{},_0x435b3a[_0x41d852(0x24e)]=_0x4f396a?_0x4f396a[_0x41d852(0x26b)][_0x41d852(0x26b)]:{};}if(_0x4d1fd0[_0x41d852(0x1fd)]){const _0x11105c=_0x4d1fd0['transportasi_data']['filter'](_0x3b09e5=>_0x3b09e5[_0x41d852(0x258)]==='Kantor')['reduce']((_0xeb709,_0x26c93a)=>_0xeb709+_0x26c93a['total'],0x0);_0x4d1fd0[_0x41d852(0x214)]=_0x11105c;}_0x410b08[_0x41d852(0x20c)]({'status':!![],'data':{'bukti_perjalanan':_0x4d1fd0,'form_dpr':_0x435b3a}});}catch(_0x6e984c){console['log'](_0x6e984c),_0x410b08['send']({'status':![],'message':'terjadi\x20error'});}},async 'update'(_0x2da17b,_0x295f45){const _0x29861f=_0x497841;try{let _0x4dc435=null,_0xf9a7e9=null;var _0x40e82d=_0x2da17b[_0x29861f(0x268)];const _0x2b625b=await model[_0x29861f(0x1f1)][_0x29861f(0x1d7)]({'where':{'id':_0x2da17b[_0x29861f(0x27a)]['id']}});var _0x32af82=_0x40e82d['tanggal_realisasi_data'];let _0x35e1b0=![];const _0xd83109=await model[_0x29861f(0x1f1)]['findAll']({'where':{'pegawai_id':_0x2b625b[_0x29861f(0x265)]}});for(let _0x5b519e=0x0;_0x5b519e<_0xd83109['length'];_0x5b519e++){const _0x13a6ed=_0xd83109[_0x5b519e][_0x29861f(0x1e8)];if(_0x13a6ed['id']!=_0x2da17b[_0x29861f(0x27a)]['id'])for(let _0x3d8811=0x0;_0x3d8811<_0x13a6ed[_0x29861f(0x1f2)][_0x29861f(0x26d)];_0x3d8811++){const _0x3836e5=_0x13a6ed[_0x29861f(0x1f2)][_0x3d8811];var _0xcc9b40=moment(_0x3836e5['tanggal_mulai']),_0x4ecbe8=moment(_0x3836e5[_0x29861f(0x260)]);for(let _0x24e9f8=0x0;_0x24e9f8<_0x32af82[_0x29861f(0x26d)];_0x24e9f8++){const _0xbd3eff=_0x32af82[_0x24e9f8];var _0x512eb9=moment(_0xbd3eff['tanggal_mulai']),_0x44e6e9=moment(_0xbd3eff[_0x29861f(0x260)]);if(_0x512eb9[_0x29861f(0x21b)](_0xcc9b40)&&_0x512eb9[_0x29861f(0x228)](_0x4ecbe8)||_0x44e6e9['isSameOrAfter'](_0xcc9b40)&&_0x44e6e9[_0x29861f(0x228)](_0x4ecbe8)){_0x35e1b0=!![],_0x4dc435=_0x512eb9,_0xf9a7e9=_0x44e6e9;break;}}}}if(!_0x35e1b0){const _0x3cb2ef=await model[_0x29861f(0x1f1)]['update'](_0x40e82d,{'where':{'id':_0x2da17b[_0x29861f(0x27a)]['id']}});_0x295f45['send']({'status':!![],'data':_0x3cb2ef});}else _0x295f45['send']({'status':![],'message':_0x29861f(0x231)+_0x4dc435['format'](_0x29861f(0x22e))+'\x20sd\x20'+_0xf9a7e9[_0x29861f(0x264)](_0x29861f(0x22e))+'\x20realisasi\x20sudah\x20ada\x20atau\x20beririsan\x20dengan\x20range\x20tanggal\x20yang\x20lain'});}catch(_0x108d86){console['log'](_0x108d86),_0x295f45['status'](0x190)['send']({'status':![],'message':'terjadi\x20error'});}},async 'detail_status'(_0x415b22,_0x283ee5){const _0x40a96e=_0x497841;try{const _0x2805e4=await model[_0x40a96e(0x1f1)]['findOne']({'where':{'id':_0x415b22[_0x40a96e(0x27a)]['id']}});var _0x47832a=_0x2805e4[_0x40a96e(0x1e8)];_0x283ee5[_0x40a96e(0x20c)]({'status':!![],'data':_0x47832a});}catch(_0x4b6218){console[_0x40a96e(0x250)](_0x4b6218),_0x283ee5[_0x40a96e(0x206)](0x190)[_0x40a96e(0x20c)]({'status':![],'message':'terjadi\x20error'});}},async 'update_status'(_0x543a3d,_0x49bbf1){const _0x6e0f86=_0x497841;let _0x1a787b=!![],_0x3cfe9c=_0x6e0f86(0x1e6);try{const _0x4caa4b=_0x543a3d[_0x6e0f86(0x268)],_0x14846c=await model['BuktiPerjalanan']['findOne']({'where':{'id':_0x543a3d[_0x6e0f86(0x27a)]['id']}});_0x4caa4b[_0x6e0f86(0x1d8)]&&_0x14846c[_0x6e0f86(0x1d8)]===null&&(_0x4caa4b[_0x6e0f86(0x205)]=_0x543a3d['user']['pegawai_id'],_0x4caa4b[_0x6e0f86(0x1fc)]=moment()[_0x6e0f86(0x264)](_0x6e0f86(0x1dc)));_0x4caa4b['status_ketua']&&(_0x4caa4b[_0x6e0f86(0x234)]=_0x543a3d['user'][_0x6e0f86(0x265)],_0x4caa4b[_0x6e0f86(0x24d)]=moment()['format'](_0x6e0f86(0x1dc)));_0x4caa4b[_0x6e0f86(0x27c)]&&(_0x4caa4b[_0x6e0f86(0x204)]=_0x543a3d[_0x6e0f86(0x21d)][_0x6e0f86(0x265)],_0x4caa4b[_0x6e0f86(0x241)]=moment()[_0x6e0f86(0x264)]('YYYY-MM-DD\x20HH:mm:ss'));_0x4caa4b[_0x6e0f86(0x20b)]&&_0x14846c['status_ppk']===null&&(_0x4caa4b[_0x6e0f86(0x20e)]=_0x543a3d['user'][_0x6e0f86(0x265)],_0x4caa4b['status_ppk_tgl']=moment()['format'](_0x6e0f86(0x1dc)));const _0x45d671=await model[_0x6e0f86(0x1f1)][_0x6e0f86(0x266)](_0x4caa4b,{'where':{'id':_0x543a3d[_0x6e0f86(0x27a)]['id']}});if((_0x4caa4b[_0x6e0f86(0x1d8)]===_0x6e0f86(0x20d)||_0x4caa4b[_0x6e0f86(0x20b)]==='Disetujui')&&_0x4caa4b[_0x6e0f86(0x239)]){const _0x15c0ee=await checkNik(_0x543a3d[_0x6e0f86(0x21d)]['pegawai_id'],_0x543a3d);console[_0x6e0f86(0x250)](_0x15c0ee);let _0x576006=!![];if(_0x15c0ee['status']){const _0x509641=await model['BuktiPerjalanan'][_0x6e0f86(0x1d7)]({'where':{'id':_0x543a3d[_0x6e0f86(0x27a)]['id']}});var _0x285c8f=_0x509641[_0x6e0f86(0x1e8)],_0x1c8ebc='$';_0x4caa4b[_0x6e0f86(0x1d8)]&&(_0x1c8ebc='*',_0x576006=![]);const _0x5ad243=await pdf_tte(_0x543a3d[_0x6e0f86(0x27a)]['id'],_0x543a3d,_0x4caa4b,_0x1c8ebc,_0x576006);if(_0x5ad243===!![]){const _0x5d1e59=await model[_0x6e0f86(0x1f1)][_0x6e0f86(0x266)](_0x4caa4b,{'where':{'id':_0x543a3d[_0x6e0f86(0x27a)]['id']}});_0x49bbf1[_0x6e0f86(0x20c)]({'status':!![]});}else _0x1a787b=![],_0x3cfe9c=_0x6e0f86(0x23e);}else _0x1a787b=![],_0x3cfe9c=_0x15c0ee[_0x6e0f86(0x23d)];}const _0x2e5173=await axios['get'](process[_0x6e0f86(0x1e3)][_0x6e0f86(0x22d)]+_0x6e0f86(0x1e9)+_0x543a3d[_0x6e0f86(0x27a)]['id'],{'headers':{'Authorization':'Bearer\x20'+_0x543a3d[_0x6e0f86(0x1ff)]}}),_0x53d97e=_0x2e5173['data'][_0x6e0f86(0x26b)];if(_0x53d97e[_0x6e0f86(0x1d8)]===_0x6e0f86(0x20d)&&_0x53d97e['status_ppk']==='Disetujui'){try{let _0x53daed=[];const _0x1c5c3d=_0x53d97e[_0x6e0f86(0x1fd)][_0x6e0f86(0x259)](_0xe8e5ba=>_0xe8e5ba[_0x6e0f86(0x27b)]===_0x6e0f86(0x207)),_0x18582a=_0x1c5c3d[_0x6e0f86(0x257)]((_0x46b192,_0x4a1f2f)=>_0x46b192+_0x4a1f2f[_0x6e0f86(0x1df)],0x0),_0x3c92f4=_0x53d97e[_0x6e0f86(0x26f)][_0x6e0f86(0x259)](_0x4bcb8d=>_0x4bcb8d['tanpa_hotel']===!![]),_0x52763f=_0x3c92f4[_0x6e0f86(0x257)]((_0x23e3b9,_0x921d99)=>_0x23e3b9+_0x921d99['total'],0x0);_0x52763f>0x0&&_0x53daed[_0x6e0f86(0x21c)]({'jumlah':_0x52763f,'tanggal_mulai':null,'tanggal_selesai':null,'uraian':'Tidak\x20menggunakan\x20hotel\x20(30%\x20biaya\x20hotel)'});_0x18582a>0x0&&_0x53daed[_0x6e0f86(0x21c)]({'jumlah':_0x18582a,'tanggal_mulai':null,'tanggal_selesai':null,'uraian':_0x6e0f86(0x1fe)});if(_0x53daed[_0x6e0f86(0x26d)]>0x0){const _0xa84b64=await model[_0x6e0f86(0x22f)][_0x6e0f86(0x1d7)]({'where':{'pegawai_id':_0x53d97e['pegawai_id'],'surat_tugas_id':_0x53d97e[_0x6e0f86(0x23c)]}});_0xa84b64?await model[_0x6e0f86(0x22f)]['update']({'list_pengeluaran':_0x53daed},{'where':{'id':_0xa84b64['id']}}):await model[_0x6e0f86(0x22f)]['create']({'pegawai_id':_0x53d97e['pegawai_id'],'surat_tugas_id':_0x53d97e[_0x6e0f86(0x23c)],'list_pengeluaran':_0x53daed});}}catch(_0x1c2ba2){console['log'](_0x1c2ba2);}try{const _0x3234e0=await modelKepegawaian['TenagaAudit'][_0x6e0f86(0x1d7)]({'where':{'id':parseInt(_0x53d97e[_0x6e0f86(0x265)])}}),_0x484afa=_0x3234e0,_0x73bfc7=await modelPengawasan[_0x6e0f86(0x210)]['findOne']({'where':{'id':_0x53d97e[_0x6e0f86(0x23c)]}}),_0x564e2b=_0x73bfc7,_0x1f8aa4=await modelPengawasan[_0x6e0f86(0x25c)][_0x6e0f86(0x1d7)]({'where':{'surat_tugas_id':parseInt(_0x53d97e['surat_tugas_id']),'anggota_id':parseInt(_0x53d97e[_0x6e0f86(0x265)])}});let _0x43f04d=_0x1f8aa4;console['log'](_0x43f04d);let _0x5766cc=null,_0x149fbb=null;if(!_0x43f04d){const _0x4a5fc9=_0x564e2b[_0x6e0f86(0x20f)][_0x6e0f86(0x226)](_0x16a3b3=>_0x16a3b3['pegawai_id']===_0x53d97e['pegawai_id']);if(_0x4a5fc9&&_0x4a5fc9[_0x6e0f86(0x22a)]===_0x6e0f86(0x222))try{const _0x3b06bd=_0x564e2b[_0x6e0f86(0x20f)][_0x6e0f86(0x226)](_0x15f8b5=>_0x15f8b5['jabatan']===_0x6e0f86(0x21f));_0x43f04d=await modelPengawasan['SuratPerjalananDinas']['findOne']({'where':{'surat_tugas_id':parseInt(_0x53d97e[_0x6e0f86(0x23c)]),'anggota_id':parseInt(_0x3b06bd[_0x6e0f86(0x265)])}});}catch(_0x5e5412){console[_0x6e0f86(0x250)](_0x5e5412);}}_0x43f04d&&(_0x5766cc=_0x43f04d['nomor_surat'],_0x149fbb=_0x43f04d['id']);console[_0x6e0f86(0x250)](_0x5766cc);if(parseInt(_0x53d97e['sisa_pengembalian'])<0x0){const _0x1d235a=await model[_0x6e0f86(0x208)][_0x6e0f86(0x1d7)]({'where':{'pegawai_id':_0x53d97e['pegawai_id'],'surat_tugas_id':_0x53d97e['surat_tugas_id']}});_0x1d235a?await model[_0x6e0f86(0x208)]['update']({'jumlah_biaya':_0x53d97e[_0x6e0f86(0x1f7)],'untuk_pembayaran':_0x6e0f86(0x213)},{'where':{'id':_0x1d235a['id']}}):await model[_0x6e0f86(0x208)][_0x6e0f86(0x273)]({'pegawai_id':_0x53d97e[_0x6e0f86(0x265)],'surat_tugas_id':_0x53d97e[_0x6e0f86(0x23c)],'jumlah_biaya':_0x53d97e[_0x6e0f86(0x1f7)],'untuk_pembayaran':'Pengembalian\x20kelebihan\x20uang\x20muka\x20ke\x20negara'});const _0x20abe6=await modelKeuangan[_0x6e0f86(0x232)][_0x6e0f86(0x1d7)]({'where':{'pegawai_id':_0x53d97e[_0x6e0f86(0x265)],'surat_tugas_id':_0x53d97e['surat_tugas_id']}}),_0x53ad38={'surat_tugas_id':_0x53d97e[_0x6e0f86(0x23c)],'spd_id':_0x149fbb,'jumlah':parseInt(_0x53d97e[_0x6e0f86(0x1f7)]*-0x1),'transfer':parseInt(_0x53d97e[_0x6e0f86(0x1f7)]*-0x1),'mak':_0x564e2b[_0x6e0f86(0x236)],'pegawai_id':_0x53d97e[_0x6e0f86(0x265)]};_0x20abe6?await modelKeuangan[_0x6e0f86(0x232)][_0x6e0f86(0x266)](_0x53ad38,{'where':{'id':_0x20abe6['id']}}):await modelKeuangan[_0x6e0f86(0x232)]['create'](_0x53ad38);}else{const _0x19b167=_0x53d97e['transportasi_data'][_0x6e0f86(0x259)](_0x296e07=>_0x296e07[_0x6e0f86(0x258)]==='Kantor')[_0x6e0f86(0x257)]((_0x1583b1,_0x465f8f)=>_0x1583b1+_0x465f8f[_0x6e0f86(0x1df)],0x0),_0x394433=await modelKeuangan['Trasfer'][_0x6e0f86(0x1d7)]({'where':{'pegawai_id':_0x53d97e[_0x6e0f86(0x265)],'surat_tugas_id':_0x53d97e[_0x6e0f86(0x23c)],'um_uf':'VF'}}),_0x35857b=_0x394433;let _0x20ca91={'pegawai_id':_0x53d97e[_0x6e0f86(0x265)],'surat_tugas_id':_0x53d97e[_0x6e0f86(0x23c)],'usulan_id':_0x564e2b[_0x6e0f86(0x1ed)],'no_rek_debet':0x1cc7c8b9393c88,'nama_rek_debet':_0x6e0f86(0x267),'no_rek_tujuan':_0x484afa[_0x6e0f86(0x233)],'nama_rek_tujuan':_0x484afa['nama_rek'],'jumlah':_0x53d97e[_0x6e0f86(0x1f7)],'bank':_0x484afa[_0x6e0f86(0x200)],'pelaku_perjadin':_0x484afa[_0x6e0f86(0x1e2)],'spd':_0x5766cc,'um_uf':'VF','nilai':_0x53d97e[_0x6e0f86(0x1f7)]};console[_0x6e0f86(0x250)](_0x20ca91),_0x35857b?await modelKeuangan[_0x6e0f86(0x1f0)]['update'](_0x20ca91,{'where':{'id':_0x35857b['id']}}):(_0x20ca91[_0x6e0f86(0x206)]=_0x6e0f86(0x1d6),await modelKeuangan[_0x6e0f86(0x1f0)][_0x6e0f86(0x273)](_0x20ca91));}}catch(_0xa1a79e){console['log'](_0xa1a79e);}}_0x1a787b?_0x49bbf1[_0x6e0f86(0x20c)]({'status':!![],'message':_0x3cfe9c}):_0x49bbf1[_0x6e0f86(0x20c)]({'status':![],'message':_0x3cfe9c});}catch(_0x3a162c){console[_0x6e0f86(0x250)](_0x3a162c),_0x49bbf1[_0x6e0f86(0x206)](0x190)['send']({'status':![],'message':_0x6e0f86(0x1db)});}},async 'delete'(_0x37cd6d,_0x12792f){const _0x5b5903=_0x497841;try{const _0x1328e6=await model[_0x5b5903(0x1f1)][_0x5b5903(0x244)]({'where':{'id':_0x37cd6d[_0x5b5903(0x27a)]['id']}});await sendNotif(_0x5b5903(0x209),_0x37cd6d[_0x5b5903(0x27a)]['id'],_0x37cd6d[_0x5b5903(0x21d)]['pegawai_id'],_0x5b5903(0x21e),_0x5b5903(0x216),_0x37cd6d[_0x5b5903(0x1ff)]),_0x12792f['send']({'status':!![],'data':_0x1328e6});}catch(_0x5ccd6d){console[_0x5b5903(0x250)](_0x5ccd6d),_0x12792f['status'](0x190)[_0x5b5903(0x20c)]({'status':![],'message':'terjadi\x20error'});}},async 'revisi'(_0x3d77d1,_0x119eb9){const _0x22907b=_0x497841;try{const {id:_0x1df047}=_0x3d77d1[_0x22907b(0x27a)],_0x127b6c=_0x3d77d1[_0x22907b(0x268)],_0x3f1090=_0x3d77d1[_0x22907b(0x268)],_0x4deb97=await encodeJwt(_0x127b6c),_0x5916b0=await model['RevisiBuktiPerjalanan'][_0x22907b(0x1d7)]({'where':{'bukti_perjalanan_id':_0x1df047}});if(_0x5916b0){if(_0x3f1090[_0x22907b(0x23c)])try{var _0x360bf7=await axios[_0x22907b(0x1e7)](process[_0x22907b(0x1e3)]['GATEWAYE_URL']+'/pengawasan_internal/surat-tugas/'+_0x3f1090[_0x22907b(0x23c)],{'headers':{'Authorization':_0x22907b(0x24f)+_0x3d77d1[_0x22907b(0x1ff)]}});_0x3f1090[_0x22907b(0x24e)]=_0x360bf7[_0x22907b(0x26b)][_0x22907b(0x26b)];}catch(_0x51e6a3){}if(_0x3f1090['pegawai_id'])try{var _0x360bf7=await axios[_0x22907b(0x1e7)](process[_0x22907b(0x1e3)][_0x22907b(0x22d)]+_0x22907b(0x245)+_0x3f1090[_0x22907b(0x265)],{'headers':{'Authorization':_0x22907b(0x24f)+_0x3d77d1[_0x22907b(0x1ff)]}});_0x3f1090[_0x22907b(0x220)]=_0x360bf7['data']['data'];}catch(_0x2baa5f){}if(_0x3f1090[_0x22907b(0x1fd)]){const _0x118315=_0x3f1090['transportasi_data'][_0x22907b(0x259)](_0x370bcc=>_0x370bcc[_0x22907b(0x258)]===_0x22907b(0x1fb))['reduce']((_0x2d6e04,_0x3248ae)=>_0x2d6e04+_0x3248ae[_0x22907b(0x1df)],0x0);_0x3f1090[_0x22907b(0x214)]=_0x118315;}const _0x1b4067=await encodeJwt(_0x3f1090);await Promise['all']([model['BuktiPerjalanan']['update'](_0x127b6c,{'where':{'id':_0x1df047},'returning':!![]}),model['RevisiBuktiPerjalanan'][_0x22907b(0x266)]({'updated':_0x1b4067},{'where':{'bukti_perjalanan_id':_0x1df047}})]);}else{const _0x17558f=await model[_0x22907b(0x1f1)][_0x22907b(0x1d7)]({'where':{'id':_0x1df047},'raw':!![]});if(_0x17558f[_0x22907b(0x23c)])try{var _0x360bf7=await axios['get'](process[_0x22907b(0x1e3)]['GATEWAYE_URL']+_0x22907b(0x201)+_0x17558f[_0x22907b(0x23c)],{'headers':{'Authorization':'Bearer\x20'+_0x3d77d1[_0x22907b(0x1ff)]}});_0x17558f[_0x22907b(0x24e)]=_0x360bf7[_0x22907b(0x26b)]['data'];}catch(_0x193948){}if(_0x17558f['pegawai_id'])try{var _0x360bf7=await axios[_0x22907b(0x1e7)](process[_0x22907b(0x1e3)][_0x22907b(0x22d)]+_0x22907b(0x245)+_0x17558f[_0x22907b(0x265)],{'headers':{'Authorization':_0x22907b(0x24f)+_0x3d77d1[_0x22907b(0x1ff)]}});_0x17558f[_0x22907b(0x220)]=_0x360bf7['data'][_0x22907b(0x26b)];}catch(_0x71f8a6){}if(_0x17558f[_0x22907b(0x1fd)]){const _0x5f35b7=_0x17558f[_0x22907b(0x1fd)][_0x22907b(0x259)](_0xadc613=>_0xadc613[_0x22907b(0x258)]===_0x22907b(0x1fb))[_0x22907b(0x257)]((_0x48a68c,_0x5108ac)=>_0x48a68c+_0x5108ac[_0x22907b(0x1df)],0x0);_0x17558f['uang_muka_transportasi']=_0x5f35b7;}const _0x1f846b=await encodeJwt(_0x17558f);await Promise[_0x22907b(0x1f6)]([model['BuktiPerjalanan'][_0x22907b(0x266)](_0x127b6c,{'where':{'id':_0x1df047},'returning':!![]}),model[_0x22907b(0x23b)]['create']({'bukti_perjalanan_id':_0x1df047,'old':_0x1f846b,'updated':_0x4deb97,'timestamp':Date[_0x22907b(0x24c)]()})]);}return await sendNotif(_0x22907b(0x209),_0x1df047,_0x3d77d1[_0x22907b(0x21d)][_0x22907b(0x265)],'Form\x20Bukti\x20Perjalanan\x20Dinas',_0x22907b(0x1ef),_0x3d77d1[_0x22907b(0x1ff)]),_0x119eb9[_0x22907b(0x206)](0xc8)[_0x22907b(0x20c)]({'status':!![],'message':'Revisi\x20berhasil\x20dilakukan'});}catch(_0x56a1cc){return console[_0x22907b(0x270)](_0x56a1cc),_0x119eb9[_0x22907b(0x206)](0x1f4)['send']({'status':![],'message':_0x22907b(0x1db)});}},async 'exportBuktiPerjalanan'(_0x4792a6,_0x4b7ded){const _0x44cee7=_0x497841;try{const {page:page=0x1,size:size=0xa,sortby:sortby='createdAt',orderby:orderby=_0x44cee7(0x1fa),search:_0x300b92,byuser:_0x2e2f49}=_0x4792a6[_0x44cee7(0x243)];let _0x435898={},_0x1084c3={};if(_0x300b92){const _0x1d329c=await model['FormDpr'][_0x44cee7(0x25d)]({'attributes':['surat_tugas_id'],'group':['surat_tugas_id']});let _0x9c8a74=[];for(let _0x1922a8=0x0;_0x1922a8<_0x1d329c[_0x44cee7(0x26d)];_0x1922a8++){const _0x5a32c5=_0x1d329c[_0x1922a8]['dataValues'];_0x9c8a74['push'](_0x5a32c5[_0x44cee7(0x23c)]);}const _0x489c18=await model['FormDpr'][_0x44cee7(0x25d)]({'attributes':[_0x44cee7(0x265)],'group':[_0x44cee7(0x265)]});let _0x3dc8b6=[];for(let _0x141f92=0x0;_0x141f92<_0x489c18[_0x44cee7(0x26d)];_0x141f92++){const _0x26d2b8=_0x489c18[_0x141f92][_0x44cee7(0x1e8)];_0x3dc8b6['push'](_0x26d2b8[_0x44cee7(0x265)]);}const [_0x386d2f,_0x3f1c55]=await Promise['all']([axios[_0x44cee7(0x1e7)](process[_0x44cee7(0x1e3)][_0x44cee7(0x22d)]+_0x44cee7(0x1ea)+_0x300b92+'&arrid='+_0x9c8a74,{'headers':{'Authorization':_0x44cee7(0x24f)+_0x4792a6['token']}}),axios['get'](process[_0x44cee7(0x1e3)][_0x44cee7(0x22d)]+'/kepegawaian/data-tenaga-audit?get=all&search='+_0x300b92+_0x44cee7(0x21a)+_0x3dc8b6,{'headers':{'Authorization':'Bearer\x20'+_0x4792a6[_0x44cee7(0x1ff)]}})]),_0x4b0b27=_0x386d2f[_0x44cee7(0x26b)][_0x44cee7(0x26b)],_0x3e059d=_0x3f1c55[_0x44cee7(0x26b)][_0x44cee7(0x26b)];let _0x5ea9a0=[];for(let _0x2dbacc=0x0;_0x2dbacc<_0x4b0b27[_0x44cee7(0x26d)];_0x2dbacc++){const _0x4e6858=_0x4b0b27[_0x2dbacc];_0x5ea9a0[_0x44cee7(0x21c)](_0x4e6858['id']);}_0x5ea9a0[_0x44cee7(0x26d)]>0x0&&(_0x435898[_0x44cee7(0x23c)]={[Op['in']]:_0x5ea9a0});let _0x259bc0=[];for(let _0x3280f6=0x0;_0x3280f6<_0x3e059d['length'];_0x3280f6++){const _0x8def77=_0x3e059d[_0x3280f6];_0x259bc0['push'](_0x8def77['id']);}_0x259bc0[_0x44cee7(0x26d)]>0x0&&(_0x435898['pegawai_id']={[Op['in']]:_0x259bc0});}if(_0x4792a6[_0x44cee7(0x21d)]['role_id']!==0x1&&_0x4792a6[_0x44cee7(0x243)][_0x44cee7(0x1e7)]!==_0x44cee7(0x1f6)){let _0x19c66d=[];const _0x3e6e51=await model[_0x44cee7(0x1f1)][_0x44cee7(0x25d)]({'raw':!![]});for(let _0x1013d4=0x0;_0x1013d4<_0x3e6e51['length'];_0x1013d4++){const _0x4746fb=_0x3e6e51[_0x1013d4];if(_0x4746fb['status_ketua']!==_0x44cee7(0x20d)||_0x4746fb[_0x44cee7(0x1f9)]===_0x44cee7(0x20d))try{const _0x34d78d=await modelPengawasan[_0x44cee7(0x210)][_0x44cee7(0x1d7)]({'where':{'id':_0x4746fb[_0x44cee7(0x23c)],'kepada':{[Op['contains']]:[{'pegawai_id':_0x4792a6[_0x44cee7(0x21d)][_0x44cee7(0x265)]}]}}});_0x34d78d&&_0x34d78d['id']===_0x4746fb[_0x44cee7(0x23c)]&&_0x19c66d['push'](_0x4746fb['id']);}catch(_0x1937f3){console['log'](_0x1937f3);}else{if(_0x4746fb[_0x44cee7(0x1f9)]===_0x44cee7(0x20d)&&_0x4792a6[_0x44cee7(0x21d)][_0x44cee7(0x203)]===_0x44cee7(0x26a)&&_0x4746fb[_0x44cee7(0x27c)]!==_0x44cee7(0x20d))_0x19c66d[_0x44cee7(0x21c)](_0x4746fb['id']);else{if(_0x4746fb[_0x44cee7(0x1f9)]===_0x44cee7(0x20d)&&_0x4746fb['status_evalap']===_0x44cee7(0x20d)&&_0x4746fb['status_ppk']!==_0x44cee7(0x20d))try{const _0x2f6bee=await modelPengawasan['SuratTugas']['findOne']({'where':{'id':_0x4746fb[_0x44cee7(0x23c)]}});_0x2f6bee&&_0x2f6bee[_0x44cee7(0x20e)]===_0x4792a6[_0x44cee7(0x21d)]['pegawai_id']&&_0x19c66d[_0x44cee7(0x21c)](_0x4746fb['id']);}catch(_0x3c86d8){console[_0x44cee7(0x250)](_0x3c86d8);}}}_0x435898[Op['or']]=[{'pegawai_id':_0x4792a6['user'][_0x44cee7(0x265)]},{'id':{[Op['in']]:_0x19c66d}}];}}const _0x4a2e0e={'where':_0x435898,'attributes':[_0x44cee7(0x23c),[sequelize['fn'](_0x44cee7(0x230),sequelize[_0x44cee7(0x26e)]('id')),_0x44cee7(0x25a)]],'group':['surat_tugas_id'],'raw':!![],'limit':parseInt(size),'offset':(parseInt(page)-0x1)*parseInt(size)},{count:_0x400d56,rows:_0x4f56a7}=await model[_0x44cee7(0x1f1)][_0x44cee7(0x1ee)]({..._0x4a2e0e}),_0x4d8f3a=await Promise['all'](_0x4f56a7[_0x44cee7(0x225)](async _0x5db5d9=>{const _0x35ceaf=_0x44cee7;if(_0x5db5d9[_0x35ceaf(0x23c)]){_0x5db5d9['id']=_0x5db5d9['surat_tugas_id'];try{var _0x544b8e=await axios[_0x35ceaf(0x1e7)](process['env'][_0x35ceaf(0x22d)]+_0x35ceaf(0x201)+_0x5db5d9[_0x35ceaf(0x23c)],{'headers':{'Authorization':_0x35ceaf(0x24f)+_0x4792a6['token']}});_0x5db5d9[_0x35ceaf(0x24e)]=_0x544b8e[_0x35ceaf(0x26b)][_0x35ceaf(0x26b)];}catch(_0x341ca8){console[_0x35ceaf(0x250)](_0x341ca8);}}return _0x5db5d9;})),_0x51ddbb=_0x400d56[_0x44cee7(0x26d)],_0x18864e=getPagingData({'count':_0x51ddbb,'rows':_0x4d8f3a},page,parseInt(size));_0x4b7ded['send']({'status':!![],..._0x18864e});}catch(_0x3dd7e0){console[_0x44cee7(0x250)](_0x3dd7e0),_0x4b7ded[_0x44cee7(0x20c)]({'status':![],'message':'terjadi\x20error'});}},async 'exportBuktiPerjalananDetail'(_0x35115a,_0x3fb8d6){const _0x1b9cf3=_0x497841,{id:_0x1e6c8f}=_0x35115a[_0x1b9cf3(0x27a)];try{var _0x43a73e=null,_0x55be84=await axios['get'](process[_0x1b9cf3(0x1e3)][_0x1b9cf3(0x22d)]+'/pengawasan_internal/surat-tugas/'+_0x1e6c8f,{'headers':{'Authorization':_0x1b9cf3(0x24f)+_0x35115a[_0x1b9cf3(0x1ff)]}});_0x43a73e=_0x55be84[_0x1b9cf3(0x26b)]['data'];const _0x129bf6=await model[_0x1b9cf3(0x1f1)][_0x1b9cf3(0x25d)]({'where':{'surat_tugas_id':_0x1e6c8f},'raw':!![]});_0x129bf6&&(_0x43a73e[_0x1b9cf3(0x1de)]=_0x129bf6,_0x43a73e[_0x1b9cf3(0x1de)]=await Promise[_0x1b9cf3(0x1f6)](_0x43a73e['bukti_perjalanan'][_0x1b9cf3(0x225)](async _0x18f617=>{const _0x347fd5=_0x1b9cf3;if(_0x18f617['pegawai_id'])try{var _0x214a03=await axios[_0x347fd5(0x1e7)](process[_0x347fd5(0x1e3)]['GATEWAYE_URL']+_0x347fd5(0x245)+_0x18f617[_0x347fd5(0x265)],{'headers':{'Authorization':_0x347fd5(0x24f)+_0x35115a['token']}});_0x18f617[_0x347fd5(0x220)]=_0x214a03[_0x347fd5(0x26b)][_0x347fd5(0x26b)];}catch(_0x126c32){}if(_0x18f617[_0x347fd5(0x23c)]&&_0x18f617[_0x347fd5(0x265)])try{const _0x53ec3a=await modelKeuangan[_0x347fd5(0x1f0)]['findAll']({'where':{'surat_tugas_id':_0x18f617[_0x347fd5(0x23c)],'pegawai_id':_0x18f617[_0x347fd5(0x265)]},'raw':!![]});_0x18f617[_0x347fd5(0x276)]=_0x53ec3a;}catch(_0x200f84){console['log'](_0x200f84);}if(_0x18f617[_0x347fd5(0x20e)])try{var _0x214a03=await axios[_0x347fd5(0x1e7)](process['env'][_0x347fd5(0x22d)]+'/kepegawaian/data-tenaga-audit/'+_0x18f617[_0x347fd5(0x20e)],{'headers':{'Authorization':_0x347fd5(0x24f)+_0x35115a[_0x347fd5(0x1ff)]}});_0x18f617[_0x347fd5(0x22c)]=_0x214a03[_0x347fd5(0x26b)]['data'];}catch(_0x1608d7){}return _0x18f617;}))),_0x3fb8d6['send']({'status':!![],'data':_0x43a73e});}catch(_0x52b265){console[_0x1b9cf3(0x250)](_0x52b265),_0x3fb8d6[_0x1b9cf3(0x20c)]({'status':![],'message':_0x1b9cf3(0x1db)});}}};
