function a3_0x35df(_0x30bdda,_0x45ecaa){const _0x108b86=a3_0x108b();return a3_0x35df=function(_0x35df3a,_0x194ad5){_0x35df3a=_0x35df3a-0x166;let _0x5910c8=_0x108b86[_0x35df3a];return _0x5910c8;},a3_0x35df(_0x30bdda,_0x45ecaa);}function a3_0x108b(){const _0x5f14a7=['evalap','reduce','pembuat_komitmen_id','body','nomor_surat','956wdgZln','../helpers/custom','kepada','history_revisi','post','update','Menunggu','ketua_id','nama','and','ketua','status','1172529WdHtFp','BuktiPerjalanan','SuratPerjalananDinas','9662096NXzPUC','data\x20tidak\x20ditemukan','FormDpr','COUNT','push','bendahara','createdAt','all','1Etxnck','verif-perjadin','Revisi\x20berhasil\x20dilakukan','YYYY-MM-DD\x20HH:mm:ss','uang_muka_transportasi','/kepegawaian/data-tenaga-audit/','detail','sisa_pengembalian','TenagaAudit','status_bendahara_tgl','findOne','status_ketua_tgl','/pengawasan_internal/surat-tugas?get=all&search=','Melakukan\x20Revisi\x20Form\x20Bukti\x20Perjalanan\x20Dinas','ppk_id','filter','desc','4062lyZJsx','Ditolak','Anda\x20belum\x20terdaftar\x20TTE\x20/\x20Passphrase\x20anda\x20salah','transport\x20-\x20jakarta','id_tte','find','no_rek','contains','dataValues','Disetujui','/eval_pelaporan/form-bukti-perjalanan/','updated','status_ketua','/data-tenaga-audit/','user','Menambah\x20Form\x20Bukti\x20Perjalanan\x20Dinas','DKI','../models/keuangan/index','Pengembalian','evalap_id','KEPEGAWAIAN_URL','Verifikasi\x20dan\x20Pelaporan','params','Anggota','role_name','Menghapus\x20Form\x20Bukti\x20Perjalanan\x20Dinas','../models/pengawasan-internal/index','create','status_bendahara','pegawai_id','pembuat_komitmen','sequelize','get','terjadi\x20error','bendahara_id','format','Bearer\x20','verifikator','4067zdtOww','length','selesai','Pengembalian\x20kelebihan\x20uang\x20muka\x20ke\x20negara','findAndCountAll','token','/pdf_tte/upload-dokumen-ttd','map','old','/pdf_tte/generate','error','Tidak\x20menggunakan\x20hotel\x20(30%\x20biaya\x20hotel)','RevisiBuktiPerjalanan','data','bukti_perjalanan','usulan_id','status_ppk','axios','4071JbnPDW','GATEWAYE_URL','exports','transportasi_data','jumlah_dibayarkan','form_bukti_perjalanan','Form\x20Bukti\x20Perjalanan','../helpers/jwt','col','SuratTugas','tanpa_hotel','total_bukti_perjalanan','passphrase','2514874CzzIDs','Verifikasi\x20Perjalanan\x20Dinas','status_evalap','status_ppk_tgl','ceil','send','pegawai','dibayar_oleh','YYYYMMDDHHmmss','TemplatePengeluaran','uraian','../models/kepegawaian/index','Kantor','message','status_evalap_tgl','FormPembayaranPenagihan','ITJEN\x20KEMENAG','total','surat_tugas_id','Uraian','env','Pending','surat_tugas','log','&arrid=','destroy','nik','ppk','role_id','1545875cJAbBm','Form\x20Bukti\x20Perjalanan\x20Dinas','../models','130DsQUdF','/kepegawaian/data-tenaga-audit?get=all&search=','mak','../models/index','Trasfer','query','nama_rek','Bukti\x20perjalanan\x20dengan\x20ST\x20dan\x20pegawai\x20Sudah\x20Ada','findAll','1002595BDuuXC','bank','/pengawasan_internal/surat-tugas/','revisi'];a3_0x108b=function(){return _0x5f14a7;};return a3_0x108b();}const a3_0x148046=a3_0x35df;(function(_0x4f13f6,_0x4dd984){const _0x83a772=a3_0x35df,_0x3847a9=_0x4f13f6();while(!![]){try{const _0x4f7c61=parseInt(_0x83a772(0x19c))/0x1*(-parseInt(_0x83a772(0x1f2))/0x2)+parseInt(_0x83a772(0x1e5))/0x3*(-parseInt(_0x83a772(0x185))/0x4)+parseInt(_0x83a772(0x170))/0x5+parseInt(_0x83a772(0x1ad))/0x6*(-parseInt(_0x83a772(0x1d3))/0x7)+parseInt(_0x83a772(0x194))/0x8+parseInt(_0x83a772(0x191))/0x9+-parseInt(_0x83a772(0x173))/0xa*(-parseInt(_0x83a772(0x17c))/0xb);if(_0x4f7c61===_0x4dd984)break;else _0x3847a9['push'](_0x3847a9['shift']());}catch(_0x2ea9db){_0x3847a9['push'](_0x3847a9['shift']());}}}(a3_0x108b,0xd13ae));const {Op,where}=require(a3_0x148046(0x1cc)),model=require(a3_0x148046(0x176)),modelPengawasan=require(a3_0x148046(0x1c7)),modelKepegawaian=require(a3_0x148046(0x1fd)),modelKeuangan=require(a3_0x148046(0x1be)),{default:axios}=require(a3_0x148046(0x1e4)),{sendNotif,checkNik,getSuratTugas}=require(a3_0x148046(0x186)),moment=require('moment'),{encodeJwt,decodeJwt}=require(a3_0x148046(0x1ec)),{PegawaiBendahara}=require(a3_0x148046(0x172)),sequelize=require('sequelize'),getPaginationTable=(_0x3bb3ae,_0x5e5b46)=>{const _0x57b5d6=a3_0x148046,_0xf6a443=_0x5e5b46?+_0x5e5b46:0xa,_0xaf4afc=_0x3bb3ae?Math[_0x57b5d6(0x1f6)](_0x3bb3ae-0x1)*_0xf6a443:0x0;return{'limit':_0xf6a443,'offset':_0xaf4afc};},transformRevisiPerjalanan=async _0x45c770=>{const _0x3f1277=a3_0x148046,_0x2aaf60=await decodeJwt(_0x45c770[_0x3f1277(0x1db)]),_0x3e0f21=await decodeJwt(_0x45c770[_0x3f1277(0x1b8)]),_0x3f3eb9={};for(const _0x29e2bb in _0x2aaf60){_0x3e0f21[_0x29e2bb]&&_0x2aaf60[_0x29e2bb]&&_0x2aaf60[_0x29e2bb]!==_0x3e0f21[_0x29e2bb]&&(_0x3f3eb9[_0x29e2bb]={'old':_0x2aaf60[_0x29e2bb],'updated':_0x3e0f21[_0x29e2bb]});}return{..._0x45c770 instanceof model[_0x3f1277(0x1df)]?_0x45c770[_0x3f1277(0x1b5)]:_0x45c770,'old':_0x2aaf60,'updated':_0x3e0f21,'changes':_0x3f3eb9};},pdf_tte=async(_0x2cf54e,_0x25cb8f,_0x4ae036,_0x4a5986,_0x500dad=![])=>{const _0x1dc6a0=a3_0x148046;try{const _0x473202=await axios[_0x1dc6a0(0x1cd)](process[_0x1dc6a0(0x167)]['GATEWAYE_URL']+'/eval_pelaporan/form-bukti-perjalanan/'+_0x2cf54e,{'headers':{'Authorization':_0x1dc6a0(0x1d1)+_0x25cb8f[_0x1dc6a0(0x1d8)]}});console[_0x1dc6a0(0x16a)](_0x473202[_0x1dc6a0(0x1e0)][_0x1dc6a0(0x1e0)]);var _0x133c3b=_0x473202[_0x1dc6a0(0x1e0)][_0x1dc6a0(0x1e0)];console['log'](_0x133c3b);var _0x549113=_0x133c3b['url_pdf'],_0x4cfdc4=_0x133c3b[_0x1dc6a0(0x1b1)];_0x500dad&&(_0x549113=null,_0x4cfdc4=null);if(!_0x549113){const _0x37ab87=await axios[_0x1dc6a0(0x189)](process[_0x1dc6a0(0x167)][_0x1dc6a0(0x1e6)]+_0x1dc6a0(0x1dc),{'folder':_0x1dc6a0(0x19d),'filename':_0x133c3b[_0x1dc6a0(0x169)][_0x1dc6a0(0x184)]+'-'+moment()['format'](_0x1dc6a0(0x1fa)),'data':_0x133c3b},{'headers':{'Authorization':'Bearer\x20'+_0x25cb8f[_0x1dc6a0(0x1d8)]}});_0x549113=_0x37ab87[_0x1dc6a0(0x1e0)][_0x1dc6a0(0x1e0)];}if(!_0x4cfdc4){const _0x3fdeee=await axios['post'](process[_0x1dc6a0(0x167)][_0x1dc6a0(0x1e6)]+_0x1dc6a0(0x1d9),{'filename':_0x549113,'regarding':_0x1dc6a0(0x1f3),'type':_0x1dc6a0(0x1f3),'paper_type':'P'},{'headers':{'Authorization':_0x1dc6a0(0x1d1)+_0x25cb8f[_0x1dc6a0(0x1d8)]}});_0x4cfdc4=_0x3fdeee['data'][_0x1dc6a0(0x1e0)]['id'];}let _0x68f55b=null;if(_0x25cb8f[_0x1dc6a0(0x1bb)][_0x1dc6a0(0x1ca)]){const _0x219890=await axios['get'](process[_0x1dc6a0(0x167)][_0x1dc6a0(0x1c1)]+_0x1dc6a0(0x1ba)+_0x25cb8f['user'][_0x1dc6a0(0x1ca)],{'headers':{'Authorization':'Bearer\x20'+_0x25cb8f['token']}});_0x68f55b=_0x219890[_0x1dc6a0(0x1e0)]['data'];}const _0x1795c6=await axios[_0x1dc6a0(0x189)](process[_0x1dc6a0(0x167)][_0x1dc6a0(0x1e6)]+'/pdf_tte/sign-ttd',{'filename':_0x549113,'nik':_0x68f55b[_0x1dc6a0(0x16d)],'passphrase':_0x4ae036[_0x1dc6a0(0x1f1)],'document_id':_0x4cfdc4,'anchor':_0x4a5986,'is_final':'0'},{'headers':{'Authorization':'Bearer\x20'+_0x25cb8f[_0x1dc6a0(0x1d8)]}});return await Promise[_0x1dc6a0(0x19b)]([model[_0x1dc6a0(0x192)][_0x1dc6a0(0x18a)]({'url_pdf':_0x549113,'url_pdf_tte':_0x549113,'id_tte':_0x4cfdc4},{'where':{'id':_0x2cf54e}})]),console[_0x1dc6a0(0x16a)]({'url_pdf':_0x549113,'url_pdf_tte':_0x549113,'id_tte':_0x4cfdc4}),!![];}catch(_0x36a090){return console[_0x1dc6a0(0x16a)](_0x36a090),![];}},getPagingData=(_0x332102,_0x2559ca,_0x153c80)=>{const _0x5481e2=a3_0x148046,{count:_0x1eb255,rows:_0x2b227e}=_0x332102,_0x129f9c=_0x2559ca?+_0x2559ca:0x0,_0x5f501d=Math[_0x5481e2(0x1f6)](_0x1eb255/_0x153c80);return{'totalItems':_0x1eb255,'data':_0x2b227e,'totalPages':_0x5f501d,'currentPage':_0x129f9c};},getPagination=(_0xa3f96,_0x270f62)=>{const _0x41833e=_0x270f62?+_0x270f62:0xa,_0x443497=_0xa3f96?Math['ceil'](_0xa3f96-0x1)*_0x41833e:0x0;return{'limit':_0x41833e,'offset':_0x443497};};module[a3_0x148046(0x1e7)]={async 'index'(_0x573f66,_0x48fd3c){const _0x37cead=a3_0x148046;try{const {page:page=0x1,size:size=0xa,sortby:sortby=_0x37cead(0x19a),orderby:orderby=_0x37cead(0x1ac),search:_0x5be15c,byuser:_0x5461c8,step:_0x213ffb}=_0x573f66[_0x37cead(0x178)];let _0x35c7f6={};_0x213ffb==_0x37cead(0x18f)&&(_0x35c7f6={'status_ketua':{[Op['or']]:[_0x37cead(0x18b),_0x37cead(0x1ae),null]}});_0x213ffb==_0x37cead(0x180)&&(_0x35c7f6={[Op[_0x37cead(0x18e)]]:[{'status_ketua':_0x37cead(0x1b6)},{'status_evalap':{[Op['or']]:[_0x37cead(0x18b),'Ditolak',null]}}]});_0x213ffb==_0x37cead(0x16e)&&(_0x35c7f6={[Op[_0x37cead(0x18e)]]:[{'status_ketua':'Disetujui'},{'status_evalap':_0x37cead(0x1b6)},{'status_ppk':{[Op['or']]:[_0x37cead(0x18b),_0x37cead(0x1ae),null]}}]});_0x213ffb==_0x37cead(0x199)&&(_0x35c7f6={[Op[_0x37cead(0x18e)]]:[{'status_ketua':_0x37cead(0x1b6)},{'status_evalap':_0x37cead(0x1b6)},{'status_ppk':_0x37cead(0x1b6)},{'status_bendahara':{[Op['or']]:[_0x37cead(0x18b),_0x37cead(0x1ae),null]}}]});_0x213ffb==_0x37cead(0x1d5)&&(_0x35c7f6={[Op[_0x37cead(0x18e)]]:[{'status_ketua':_0x37cead(0x1b6)},{'status_evalap':'Disetujui'},{'status_ppk':_0x37cead(0x1b6)},{'status_bendahara':_0x37cead(0x1b6)}]});let _0x5c02fe={};if(_0x5be15c){const _0x1f54fa=await model[_0x37cead(0x192)]['findAll']({'attributes':[_0x37cead(0x204)],'group':['surat_tugas_id']});let _0x3b2440=[];for(let _0x226778=0x0;_0x226778<_0x1f54fa['length'];_0x226778++){const _0x3db777=_0x1f54fa[_0x226778][_0x37cead(0x1b5)];_0x3b2440['push'](_0x3db777[_0x37cead(0x204)]);}const _0xca7892=await model[_0x37cead(0x192)][_0x37cead(0x17b)]({'attributes':[_0x37cead(0x1ca)],'group':[_0x37cead(0x1ca)]});let _0x4554b7=[];for(let _0x11175e=0x0;_0x11175e<_0xca7892['length'];_0x11175e++){const _0xeb0c92=_0xca7892[_0x11175e]['dataValues'];_0x4554b7[_0x37cead(0x198)](_0xeb0c92[_0x37cead(0x1ca)]);}const [_0xd479ad,_0x29b5a6]=await Promise[_0x37cead(0x19b)]([axios['get'](process[_0x37cead(0x167)][_0x37cead(0x1e6)]+_0x37cead(0x1a8)+_0x5be15c+_0x37cead(0x16b)+_0x3b2440,{'headers':{'Authorization':_0x37cead(0x1d1)+_0x573f66[_0x37cead(0x1d8)]}}),axios[_0x37cead(0x1cd)](process[_0x37cead(0x167)][_0x37cead(0x1e6)]+_0x37cead(0x174)+_0x5be15c+_0x37cead(0x16b)+_0x4554b7,{'headers':{'Authorization':_0x37cead(0x1d1)+_0x573f66[_0x37cead(0x1d8)]}})]),_0x21c87c=_0xd479ad[_0x37cead(0x1e0)][_0x37cead(0x1e0)],_0x31eaa6=_0x29b5a6[_0x37cead(0x1e0)][_0x37cead(0x1e0)];let _0x2c741c=[];for(let _0x5e08d8=0x0;_0x5e08d8<_0x21c87c[_0x37cead(0x1d4)];_0x5e08d8++){const _0x3f759d=_0x21c87c[_0x5e08d8];_0x2c741c['push'](_0x3f759d['id']);}_0x2c741c[_0x37cead(0x1d4)]>0x0&&(_0x35c7f6[_0x37cead(0x204)]={[Op['in']]:_0x2c741c});let _0x587caa=[];for(let _0x624cdb=0x0;_0x624cdb<_0x31eaa6[_0x37cead(0x1d4)];_0x624cdb++){const _0xac4bdc=_0x31eaa6[_0x624cdb];_0x587caa[_0x37cead(0x198)](_0xac4bdc['id']);}_0x587caa['length']>0x0&&(_0x35c7f6[_0x37cead(0x1ca)]={[Op['in']]:_0x587caa});}_0x5461c8&&(_0x35c7f6[_0x37cead(0x1ca)]=_0x573f66[_0x37cead(0x1bb)][_0x37cead(0x1ca)]);if(_0x573f66[_0x37cead(0x1bb)][_0x37cead(0x16f)]!==0x1&&_0x573f66['query'][_0x37cead(0x1cd)]!==_0x37cead(0x19b)){if(_0x5461c8)_0x35c7f6[_0x37cead(0x1ca)]=_0x573f66['user']['pegawai_id'];else{let _0x3d8a1d=[];const _0x523edb=await model[_0x37cead(0x192)][_0x37cead(0x17b)]({'raw':!![]});for(let _0x3a3373=0x0;_0x3a3373<_0x523edb[_0x37cead(0x1d4)];_0x3a3373++){const _0x4177db=_0x523edb[_0x3a3373];if(_0x4177db[_0x37cead(0x1b9)]!==_0x37cead(0x1b6)||_0x4177db[_0x37cead(0x1b9)]==='Disetujui')try{const _0xa7f6e7=await modelPengawasan[_0x37cead(0x1ee)][_0x37cead(0x1a6)]({'where':{'id':_0x4177db[_0x37cead(0x204)],'kepada':{[Op[_0x37cead(0x1b4)]]:[{'pegawai_id':_0x573f66[_0x37cead(0x1bb)][_0x37cead(0x1ca)]}]}}});_0xa7f6e7&&_0xa7f6e7['id']===_0x4177db[_0x37cead(0x204)]&&_0x3d8a1d[_0x37cead(0x198)](_0x4177db['id']);}catch(_0x12007b){console[_0x37cead(0x16a)](_0x12007b);}else{if(_0x4177db[_0x37cead(0x1b9)]===_0x37cead(0x1b6)&&_0x573f66[_0x37cead(0x1bb)][_0x37cead(0x1c5)]===_0x37cead(0x1c2)&&_0x4177db['status_evalap']!==_0x37cead(0x1b6))_0x3d8a1d[_0x37cead(0x198)](_0x4177db['id']);else{if(_0x4177db[_0x37cead(0x1b9)]===_0x37cead(0x1b6)&&_0x4177db[_0x37cead(0x1f4)]===_0x37cead(0x1b6)&&_0x4177db[_0x37cead(0x1e3)]!==_0x37cead(0x1b6))try{const _0x55f35b=await modelPengawasan[_0x37cead(0x1ee)][_0x37cead(0x1a6)]({'where':{'id':_0x4177db[_0x37cead(0x204)]}});_0x55f35b&&_0x55f35b[_0x37cead(0x1aa)]===_0x573f66[_0x37cead(0x1bb)][_0x37cead(0x1ca)]&&_0x3d8a1d[_0x37cead(0x198)](_0x4177db['id']);}catch(_0x159707){console[_0x37cead(0x16a)](_0x159707);}}}_0x35c7f6[Op['or']]=[{'pegawai_id':_0x573f66['user'][_0x37cead(0x1ca)]},{'id':{[Op['in']]:_0x3d8a1d}}];}}}const _0x23ad1c={'where':_0x35c7f6,'order':[[sortby,orderby]],'limit':parseInt(size),'offset':(parseInt(page)-0x1)*parseInt(size)},{count:_0x1f51a8,rows:_0x2403f9}=await model[_0x37cead(0x192)]['findAndCountAll']({..._0x23ad1c,'raw':!![]}),_0x3b9758=await Promise[_0x37cead(0x19b)](_0x2403f9[_0x37cead(0x1da)](async _0x3a3c4a=>{const _0x1d2108=_0x37cead;_0x3a3c4a['pegawai']=null;if(_0x3a3c4a[_0x1d2108(0x1ca)])try{const _0x232a49=await modelKepegawaian['TenagaAudit']['findOne']({'where':{'id':_0x3a3c4a['pegawai_id']}});_0x3a3c4a[_0x1d2108(0x1f8)]=_0x232a49;}catch(_0x2c58e0){console[_0x1d2108(0x16a)](_0x2c58e0);}_0x3a3c4a[_0x1d2108(0x169)]=null;if(_0x3a3c4a[_0x1d2108(0x204)])try{const _0x3dca78=await modelPengawasan[_0x1d2108(0x1ee)]['findOne']({'where':{'id':_0x3a3c4a[_0x1d2108(0x204)]}});_0x3a3c4a[_0x1d2108(0x169)]=_0x3dca78;}catch(_0x38df43){}return _0x3a3c4a[_0x1d2108(0x1c9)]==_0x1d2108(0x1b6)&&_0x3a3c4a['status_ppk']==null&&_0x3a3c4a['status_evalap_tgl']!=null&&(_0x3a3c4a[_0x1d2108(0x1e3)]=_0x1d2108(0x1b6),await model[_0x1d2108(0x192)]['update']({'status_ppk':_0x1d2108(0x1b6)},{'where':{'id':_0x3a3c4a['id']}})),_0x3a3c4a;})),_0xdf1fbb=getPagingData({'count':_0x1f51a8,'rows':_0x3b9758},page,parseInt(size));_0x48fd3c[_0x37cead(0x1f7)]({'status':!![],..._0xdf1fbb});}catch(_0x22b5fd){console[_0x37cead(0x16a)](_0x22b5fd),_0x48fd3c[_0x37cead(0x1f7)]({'status':![],'message':_0x37cead(0x1ce)});}},async 'add'(_0x2105a8,_0x1e62f8){const _0x44f84f=a3_0x148046;try{const _0xc1f402={..._0x2105a8[_0x44f84f(0x183)]};(_0xc1f402['pegawai_id']===''||!_0xc1f402['pegawai_id'])&&(_0xc1f402[_0x44f84f(0x1ca)]=_0x2105a8[_0x44f84f(0x1bb)][_0x44f84f(0x1ca)]);const _0x42185f=await model[_0x44f84f(0x192)][_0x44f84f(0x1a6)]({'where':{'surat_tugas_id':_0xc1f402[_0x44f84f(0x204)],'pegawai_id':_0xc1f402['pegawai_id']}});if(_0x42185f)return _0x1e62f8[_0x44f84f(0x1f7)]({'status':![],'message':_0x44f84f(0x17a)});else{const _0x1f61bb=await model[_0x44f84f(0x192)][_0x44f84f(0x1c8)](_0xc1f402);return await sendNotif(_0x44f84f(0x1ea),_0x1f61bb['id'],_0x2105a8[_0x44f84f(0x1bb)][_0x44f84f(0x1ca)],_0x44f84f(0x171),_0x44f84f(0x1bc),_0x2105a8[_0x44f84f(0x1d8)]),_0x1e62f8[_0x44f84f(0x1f7)]({'status':!![],'data':_0x1f61bb});}}catch(_0x8d9f3c){return console[_0x44f84f(0x1dd)](_0x8d9f3c),_0x1e62f8[_0x44f84f(0x190)](0x190)[_0x44f84f(0x1f7)]({'status':![],'message':_0x44f84f(0x1ce)});}},async 'detail'(_0x12207b,_0x307a28){const _0xb20a09=a3_0x148046;try{const {id:_0x1bdb1e}=_0x12207b['params'],_0x358b49=await model[_0xb20a09(0x192)][_0xb20a09(0x1a6)]({'where':{'id':_0x1bdb1e},'include':[{'model':model[_0xb20a09(0x1df)],'as':_0xb20a09(0x188)}]});let _0x95609c=_0x358b49?_0x358b49[_0xb20a09(0x1b5)]:{};!_0x95609c&&_0x307a28[_0xb20a09(0x1f7)]({'status':![],'message':_0xb20a09(0x195)});if(_0x95609c[_0xb20a09(0x1e8)]){const _0x552924=_0x95609c['transportasi_data'][_0xb20a09(0x1ab)](_0x3992b7=>_0x3992b7['dibayar_oleh']===_0xb20a09(0x1fe))[_0xb20a09(0x181)]((_0x5a9f68,_0x10675b)=>_0x5a9f68+_0x10675b[_0xb20a09(0x203)],0x0);_0x95609c[_0xb20a09(0x1a0)]=_0x552924;}_0x95609c['surat_tugas']=null;if(_0x95609c['surat_tugas_id'])try{_0x95609c[_0xb20a09(0x169)]=await getSuratTugas(_0x95609c['surat_tugas_id']),_0x95609c[_0xb20a09(0x1aa)]=_0x95609c[_0xb20a09(0x169)]['ppk_id'];}catch(_0x26e8ae){}_0x95609c[_0xb20a09(0x1f8)]=null;if(_0x95609c['pegawai_id'])try{const _0x32b98f=await modelKepegawaian['TenagaAudit'][_0xb20a09(0x1a6)]({'where':{'id':_0x95609c[_0xb20a09(0x1ca)]}});_0x95609c[_0xb20a09(0x1f8)]=_0x32b98f;}catch(_0x4cea01){}_0x95609c['ketua']=null;if(_0x95609c['ketua_id'])try{const _0x13f356=await modelKepegawaian[_0xb20a09(0x1a4)][_0xb20a09(0x1a6)]({'where':{'id':_0x95609c[_0xb20a09(0x18c)]}});_0x95609c[_0xb20a09(0x18f)]=_0x13f356;}catch(_0x20c94e){}_0x95609c['evalap']=null;if(_0x95609c[_0xb20a09(0x1c0)])try{const _0x52a286=await modelKepegawaian['TenagaAudit'][_0xb20a09(0x1a6)]({'where':{'id':_0x95609c['evalap_id']}});_0x95609c[_0xb20a09(0x180)]=_0x52a286;}catch(_0x49978d){}_0x95609c['ppk']=null;if(_0x95609c[_0xb20a09(0x1aa)])try{const _0x2a49e2=await modelKepegawaian[_0xb20a09(0x1a4)][_0xb20a09(0x1a6)]({'where':{'id':_0x95609c[_0xb20a09(0x1aa)]}});_0x95609c['ppk']=_0x2a49e2;}catch(_0x4f1f93){}let _0x3e0f44=await PegawaiBendahara[_0xb20a09(0x1a6)]({'where':{[Op['and']]:[{'keterangan':_0xb20a09(0x1eb)},{'utama':!![]}]}});_0x95609c[_0xb20a09(0x199)]=null;if(_0x3e0f44)try{let _0x16944c=_0x3e0f44['dataValues'];_0x16944c[_0xb20a09(0x1f8)]=null;const _0x569d74=await modelKepegawaian[_0xb20a09(0x1a4)][_0xb20a09(0x1a6)]({'where':{'id':_0x3e0f44['pegawai_id']}});_0x16944c[_0xb20a09(0x1f8)]=_0x569d74,_0x95609c[_0xb20a09(0x199)]=_0x3e0f44,_0x95609c['bendahara_id']=_0x3e0f44['pegawai_id'];}catch(_0x34ddcd){}_0x95609c[_0xb20a09(0x188)]=await Promise[_0xb20a09(0x19b)](_0x95609c[_0xb20a09(0x188)][_0xb20a09(0x1da)](transformRevisiPerjalanan));const _0x4e944f=await model['RevisiBuktiPerjalanan'][_0xb20a09(0x1a6)]({'where':{'bukti_perjalanan_id':_0x1bdb1e}});return _0x4e944f&&(_0x4e944f[_0xb20a09(0x1b5)][_0xb20a09(0x1db)]=await decodeJwt(_0x4e944f[_0xb20a09(0x1b5)]['old']),_0x4e944f[_0xb20a09(0x1b5)][_0xb20a09(0x1b8)]=await decodeJwt(_0x4e944f[_0xb20a09(0x1b5)][_0xb20a09(0x1b8)]),_0x95609c={..._0x95609c,..._0x4e944f[_0xb20a09(0x1b5)][_0xb20a09(0x1b8)]},_0x95609c[_0xb20a09(0x17f)]=_0x4e944f[_0xb20a09(0x1b5)]),(!_0x95609c[_0xb20a09(0x1a3)]||parseInt(_0x95609c['sisa_pengembalian']||0x0)==0x0)&&(_0x95609c[_0xb20a09(0x1a3)]=parseInt(_0x95609c[_0xb20a09(0x1e9)]||0x0)-(parseInt(_0x95609c['uang_muka']||0x0)+parseInt(_0x95609c[_0xb20a09(0x1a0)]||0x0))),_0x95609c[_0xb20a09(0x1c9)]==_0xb20a09(0x1b6)&&_0x95609c[_0xb20a09(0x1e3)]==null&&_0x95609c['status_evalap_tgl']!=null&&(_0x95609c[_0xb20a09(0x1e3)]=_0xb20a09(0x1b6)),_0x307a28[_0xb20a09(0x190)](0xc8)[_0xb20a09(0x1f7)]({'status':!![],'data':_0x95609c});}catch(_0x52b26f){return console[_0xb20a09(0x16a)](_0x52b26f),_0x307a28['status'](0x1f4)[_0xb20a09(0x1f7)]({'status':![],'message':'terjadi\x20error'});}},async 'detail_cek'(_0x1899da,_0x902b07){const _0x54145e=a3_0x148046;try{const _0x1f27f0=await model[_0x54145e(0x192)]['findOne']({'where':{'pegawai_id':_0x1899da['body'][_0x54145e(0x1ca)],'surat_tugas_id':_0x1899da[_0x54145e(0x183)][_0x54145e(0x204)]}});_0x902b07[_0x54145e(0x1f7)]({'status':!![],'data':_0x1f27f0});}catch(_0x58e167){console[_0x54145e(0x16a)](_0x58e167),_0x902b07['status'](0x190)[_0x54145e(0x1f7)]({'status':![],'message':_0x54145e(0x1ce)});}},async 'detail_perjadin_dpr'(_0x2d1060,_0x1b2d7a){const _0x2df14d=a3_0x148046;try{const _0x1d21ec=await model[_0x2df14d(0x192)][_0x2df14d(0x1a6)]({'where':{'id':_0x2d1060['params']['id']}}),_0x2b1ed5=_0x1d21ec?_0x1d21ec[_0x2df14d(0x1b5)]:{},[_0x460fdc,_0x931862]=await Promise[_0x2df14d(0x19b)]([_0x2b1ed5[_0x2df14d(0x1ca)]?modelKepegawaian[_0x2df14d(0x1a4)][_0x2df14d(0x1a6)]({'where':{'id':_0x2b1ed5[_0x2df14d(0x1ca)]}}):null,_0x2b1ed5[_0x2df14d(0x204)]?axios[_0x2df14d(0x1cd)](process[_0x2df14d(0x167)][_0x2df14d(0x1e6)]+_0x2df14d(0x17e)+_0x1d21ec[_0x2df14d(0x204)],{'headers':{'Authorization':'Bearer\x20'+_0x2d1060[_0x2df14d(0x1d8)]}}):null]);_0x2b1ed5[_0x2df14d(0x1f8)]=_0x460fdc?_0x460fdc:{},_0x2b1ed5[_0x2df14d(0x169)]=_0x931862?_0x931862['data']['data']:{};const _0x483e7e=await model['FormDpr'][_0x2df14d(0x1a6)]({'where':{'surat_tugas_id':_0x2b1ed5[_0x2df14d(0x204)],'pegawai_id':_0x2d1060[_0x2df14d(0x1bb)]['pegawai_id']}});let _0x5ea31a=_0x483e7e;if(_0x483e7e){_0x5ea31a=_0x483e7e[_0x2df14d(0x1b5)];const [_0x49b528]=await Promise[_0x2df14d(0x19b)]([_0x5ea31a['pembuat_komitmen_id']?modelKepegawaian[_0x2df14d(0x1a4)][_0x2df14d(0x1a6)]({'where':{'id':_0x5ea31a[_0x2df14d(0x182)]}}):null]),_0x56f9c2=await Promise[_0x2df14d(0x19b)](_0x5ea31a['list_pengeluaran']['map'](async _0x3a49e1=>{const _0x42b96b=_0x2df14d,_0x2eb812=_0x3a49e1[_0x42b96b(0x1fc)]?_0x3a49e1[_0x42b96b(0x1fc)]:_0x3a49e1[_0x42b96b(0x166)];var _0x2b44fb=await model[_0x42b96b(0x1fb)][_0x42b96b(0x1a6)]({'where':{'detail':_0x2eb812}});return _0x2b44fb&&(_0x3a49e1[_0x42b96b(0x1fc)]=_0x2b44fb[_0x42b96b(0x1a2)]),_0x3a49e1;}));_0x5ea31a['list_pengeluaran']=_0x56f9c2,_0x5ea31a[_0x2df14d(0x1cb)]=_0x49b528?_0x49b528:{},_0x5ea31a[_0x2df14d(0x1f8)]=_0x460fdc?_0x460fdc:{},_0x5ea31a[_0x2df14d(0x169)]=_0x931862?_0x931862[_0x2df14d(0x1e0)][_0x2df14d(0x1e0)]:{};}if(_0x2b1ed5[_0x2df14d(0x1e8)]){const _0x204f1f=_0x2b1ed5['transportasi_data'][_0x2df14d(0x1ab)](_0x22e09d=>_0x22e09d[_0x2df14d(0x1f9)]===_0x2df14d(0x1fe))[_0x2df14d(0x181)]((_0x31060b,_0x54af21)=>_0x31060b+_0x54af21[_0x2df14d(0x203)],0x0);_0x2b1ed5['uang_muka_transportasi']=_0x204f1f;}_0x1b2d7a[_0x2df14d(0x1f7)]({'status':!![],'data':{'bukti_perjalanan':_0x2b1ed5,'form_dpr':_0x5ea31a}});}catch(_0x25d077){console[_0x2df14d(0x16a)](_0x25d077),_0x1b2d7a[_0x2df14d(0x1f7)]({'status':![],'message':_0x2df14d(0x1ce)});}},async 'update'(_0x13ecaf,_0xb42d33){const _0x1cff1e=a3_0x148046;try{var _0xac7f7d=_0x13ecaf[_0x1cff1e(0x183)];const _0xfd2832=await model['BuktiPerjalanan'][_0x1cff1e(0x18a)](_0xac7f7d,{'where':{'id':_0x13ecaf['params']['id']}});_0xb42d33['send']({'status':!![],'data':_0xfd2832});}catch(_0x3b5c61){console[_0x1cff1e(0x16a)](_0x3b5c61),_0xb42d33[_0x1cff1e(0x190)](0x190)['send']({'status':![],'message':_0x1cff1e(0x1ce)});}},async 'detail_status'(_0x486ae1,_0x5a6257){const _0x1cac66=a3_0x148046;try{const _0x52e1dd=await model[_0x1cac66(0x192)][_0x1cac66(0x1a6)]({'where':{'id':_0x486ae1['params']['id']}});var _0x5304f3=_0x52e1dd[_0x1cac66(0x1b5)];_0x5a6257[_0x1cac66(0x1f7)]({'status':!![],'data':_0x5304f3});}catch(_0x1b4f2e){console[_0x1cac66(0x16a)](_0x1b4f2e),_0x5a6257['status'](0x190)[_0x1cac66(0x1f7)]({'status':![],'message':'terjadi\x20error'});}},async 'update_status'(_0x485bf8,_0x2549eb){const _0x3cb96f=a3_0x148046;let _0xf5476e=!![],_0x267810='Berhasil';try{const _0x4e82e9=_0x485bf8['body'],_0xbc9a2f=await model['BuktiPerjalanan'][_0x3cb96f(0x1a6)]({'where':{'id':_0x485bf8[_0x3cb96f(0x1c3)]['id']}});_0x4e82e9[_0x3cb96f(0x1c9)]&&_0xbc9a2f[_0x3cb96f(0x1c9)]===null&&(_0x4e82e9[_0x3cb96f(0x1cf)]=_0x485bf8['user'][_0x3cb96f(0x1ca)],_0x4e82e9[_0x3cb96f(0x1a5)]=moment()[_0x3cb96f(0x1d0)](_0x3cb96f(0x19f)));_0x4e82e9[_0x3cb96f(0x1b9)]&&(_0x4e82e9[_0x3cb96f(0x18c)]=_0x485bf8[_0x3cb96f(0x1bb)][_0x3cb96f(0x1ca)],_0x4e82e9[_0x3cb96f(0x1a7)]=moment()[_0x3cb96f(0x1d0)](_0x3cb96f(0x19f)));_0x4e82e9['status_evalap']&&(_0x4e82e9[_0x3cb96f(0x1c0)]=_0x485bf8[_0x3cb96f(0x1bb)][_0x3cb96f(0x1ca)],_0x4e82e9[_0x3cb96f(0x200)]=moment()[_0x3cb96f(0x1d0)](_0x3cb96f(0x19f)));_0x4e82e9[_0x3cb96f(0x1e3)]&&_0xbc9a2f[_0x3cb96f(0x1e3)]===null&&(_0x4e82e9[_0x3cb96f(0x1aa)]=_0x485bf8[_0x3cb96f(0x1bb)][_0x3cb96f(0x1ca)],_0x4e82e9[_0x3cb96f(0x1f5)]=moment()[_0x3cb96f(0x1d0)]('YYYY-MM-DD\x20HH:mm:ss'));const _0x17a5f2=await model[_0x3cb96f(0x192)][_0x3cb96f(0x18a)](_0x4e82e9,{'where':{'id':_0x485bf8[_0x3cb96f(0x1c3)]['id']}});if((_0x4e82e9[_0x3cb96f(0x1c9)]===_0x3cb96f(0x1b6)||_0x4e82e9['status_ppk']===_0x3cb96f(0x1b6))&&_0x4e82e9['passphrase']){const _0x4024e7=await checkNik(_0x485bf8['user']['pegawai_id'],_0x485bf8);console[_0x3cb96f(0x16a)](_0x4024e7);let _0x2ac233=!![];if(_0x4024e7[_0x3cb96f(0x190)]){const _0x1b2c1f=await model['BuktiPerjalanan'][_0x3cb96f(0x1a6)]({'where':{'id':_0x485bf8[_0x3cb96f(0x1c3)]['id']}});var _0x44055e=_0x1b2c1f[_0x3cb96f(0x1b5)],_0x1a45d2='$';_0x4e82e9['status_bendahara']&&(_0x1a45d2='*',_0x2ac233=![]);const _0x20dd49=await pdf_tte(_0x485bf8['params']['id'],_0x485bf8,_0x4e82e9,_0x1a45d2,_0x2ac233);if(_0x20dd49===!![]){const _0x27f8d5=await model[_0x3cb96f(0x192)][_0x3cb96f(0x18a)](_0x4e82e9,{'where':{'id':_0x485bf8[_0x3cb96f(0x1c3)]['id']}});_0x2549eb[_0x3cb96f(0x1f7)]({'status':!![]});}else _0xf5476e=![],_0x267810=_0x3cb96f(0x1af);}else _0xf5476e=![],_0x267810=_0x4024e7[_0x3cb96f(0x1ff)];}const _0x3ad797=await axios[_0x3cb96f(0x1cd)](process[_0x3cb96f(0x167)][_0x3cb96f(0x1e6)]+_0x3cb96f(0x1b7)+_0x485bf8[_0x3cb96f(0x1c3)]['id'],{'headers':{'Authorization':_0x3cb96f(0x1d1)+_0x485bf8[_0x3cb96f(0x1d8)]}}),_0x1854e8=_0x3ad797[_0x3cb96f(0x1e0)]['data'];if(_0x1854e8[_0x3cb96f(0x1c9)]===_0x3cb96f(0x1b6)&&_0x1854e8[_0x3cb96f(0x1e3)]===_0x3cb96f(0x1b6)){try{let _0x54dfb7=[];const _0x5d0e50=_0x1854e8['transportasi_data'][_0x3cb96f(0x1ab)](_0x2dccb5=>_0x2dccb5['jenis']===_0x3cb96f(0x1bd)),_0x524094=_0x5d0e50[_0x3cb96f(0x181)]((_0x123475,_0x1aedd0)=>_0x123475+_0x1aedd0[_0x3cb96f(0x203)],0x0),_0x87f37e=_0x1854e8['uang_penginapan_data'][_0x3cb96f(0x1ab)](_0x10d267=>_0x10d267[_0x3cb96f(0x1ef)]===!![]),_0x2de530=_0x87f37e[_0x3cb96f(0x181)]((_0x4f734c,_0x3c74e3)=>_0x4f734c+_0x3c74e3[_0x3cb96f(0x203)],0x0);_0x2de530>0x0&&_0x54dfb7['push']({'jumlah':_0x2de530,'tanggal_mulai':null,'tanggal_selesai':null,'uraian':_0x3cb96f(0x1de)});_0x524094>0x0&&_0x54dfb7['push']({'jumlah':_0x524094,'tanggal_mulai':null,'tanggal_selesai':null,'uraian':_0x3cb96f(0x1b0)});if(_0x54dfb7[_0x3cb96f(0x1d4)]>0x0){const _0x4f3af6=await model[_0x3cb96f(0x196)]['findOne']({'where':{'pegawai_id':_0x1854e8[_0x3cb96f(0x1ca)],'surat_tugas_id':_0x1854e8[_0x3cb96f(0x204)]}});_0x4f3af6?await model['FormDpr'][_0x3cb96f(0x18a)]({'list_pengeluaran':_0x54dfb7},{'where':{'id':_0x4f3af6['id']}}):await model[_0x3cb96f(0x196)][_0x3cb96f(0x1c8)]({'pegawai_id':_0x1854e8['pegawai_id'],'surat_tugas_id':_0x1854e8[_0x3cb96f(0x204)],'list_pengeluaran':_0x54dfb7});}}catch(_0x2d779e){console[_0x3cb96f(0x16a)](_0x2d779e);}try{const _0x2be902=await modelKepegawaian[_0x3cb96f(0x1a4)][_0x3cb96f(0x1a6)]({'where':{'id':parseInt(_0x1854e8[_0x3cb96f(0x1ca)])}}),_0x485cd6=_0x2be902,_0xd21d61=await modelPengawasan[_0x3cb96f(0x1ee)][_0x3cb96f(0x1a6)]({'where':{'id':_0x1854e8[_0x3cb96f(0x204)]}}),_0x3e096b=_0xd21d61,_0x1ad27c=await modelPengawasan[_0x3cb96f(0x193)][_0x3cb96f(0x1a6)]({'where':{'surat_tugas_id':parseInt(_0x1854e8['surat_tugas_id']),'anggota_id':parseInt(_0x1854e8[_0x3cb96f(0x1ca)])}});let _0x478aaa=_0x1ad27c;console['log'](_0x478aaa);let _0x57724f=null,_0x4ec91f=null;if(!_0x478aaa){const _0x136d18=_0x3e096b[_0x3cb96f(0x187)]['find'](_0x30759d=>_0x30759d[_0x3cb96f(0x1ca)]===_0x1854e8[_0x3cb96f(0x1ca)]);if(_0x136d18&&_0x136d18['jabatan']===_0x3cb96f(0x1c4))try{const _0x265ef6=_0x3e096b['kepada'][_0x3cb96f(0x1b2)](_0x2020d0=>_0x2020d0['jabatan']==='Ketua\x20Tim');_0x478aaa=await modelPengawasan[_0x3cb96f(0x193)]['findOne']({'where':{'surat_tugas_id':parseInt(_0x1854e8[_0x3cb96f(0x204)]),'anggota_id':parseInt(_0x265ef6['pegawai_id'])}});}catch(_0x5cd1e4){console['log'](_0x5cd1e4);}}_0x478aaa&&(_0x57724f=_0x478aaa['nomor_surat'],_0x4ec91f=_0x478aaa['id']);console[_0x3cb96f(0x16a)](_0x57724f);if(parseInt(_0x1854e8[_0x3cb96f(0x1a3)])<0x0){const _0x15a2b2=await model[_0x3cb96f(0x201)]['findOne']({'where':{'pegawai_id':_0x1854e8[_0x3cb96f(0x1ca)],'surat_tugas_id':_0x1854e8[_0x3cb96f(0x204)]}});_0x15a2b2?await model['FormPembayaranPenagihan']['update']({'jumlah_biaya':_0x1854e8[_0x3cb96f(0x1a3)],'untuk_pembayaran':_0x3cb96f(0x1d6)},{'where':{'id':_0x15a2b2['id']}}):await model['FormPembayaranPenagihan']['create']({'pegawai_id':_0x1854e8[_0x3cb96f(0x1ca)],'surat_tugas_id':_0x1854e8['surat_tugas_id'],'jumlah_biaya':_0x1854e8['sisa_pengembalian'],'untuk_pembayaran':_0x3cb96f(0x1d6)});const _0x582173=await modelKeuangan[_0x3cb96f(0x1bf)][_0x3cb96f(0x1a6)]({'where':{'pegawai_id':_0x1854e8['pegawai_id'],'surat_tugas_id':_0x1854e8[_0x3cb96f(0x204)]}}),_0x208f1d={'surat_tugas_id':_0x1854e8[_0x3cb96f(0x204)],'spd_id':_0x4ec91f,'jumlah':parseInt(_0x1854e8[_0x3cb96f(0x1a3)]*-0x1),'transfer':parseInt(_0x1854e8['sisa_pengembalian']*-0x1),'mak':_0x3e096b[_0x3cb96f(0x175)],'pegawai_id':_0x1854e8[_0x3cb96f(0x1ca)]};_0x582173?await modelKeuangan['Pengembalian'][_0x3cb96f(0x18a)](_0x208f1d,{'where':{'id':_0x582173['id']}}):await modelKeuangan[_0x3cb96f(0x1bf)][_0x3cb96f(0x1c8)](_0x208f1d);}else{const _0x527d1f=_0x1854e8[_0x3cb96f(0x1e8)][_0x3cb96f(0x1ab)](_0x46b3ed=>_0x46b3ed['dibayar_oleh']===_0x3cb96f(0x1fe))[_0x3cb96f(0x181)]((_0x50cfe3,_0x1fe23f)=>_0x50cfe3+_0x1fe23f[_0x3cb96f(0x203)],0x0),_0x6b8308=await modelKeuangan['Trasfer'][_0x3cb96f(0x1a6)]({'where':{'pegawai_id':_0x1854e8[_0x3cb96f(0x1ca)],'surat_tugas_id':_0x1854e8[_0x3cb96f(0x204)],'um_uf':'VF'}}),_0x4bd9ba=_0x6b8308;let _0x37ded3={'pegawai_id':_0x1854e8[_0x3cb96f(0x1ca)],'surat_tugas_id':_0x1854e8['surat_tugas_id'],'usulan_id':_0x3e096b[_0x3cb96f(0x1e2)],'no_rek_debet':0x1cc7c8b9393c88,'nama_rek_debet':_0x3cb96f(0x202),'no_rek_tujuan':_0x485cd6[_0x3cb96f(0x1b3)],'nama_rek_tujuan':_0x485cd6[_0x3cb96f(0x179)],'jumlah':_0x1854e8[_0x3cb96f(0x1a3)],'bank':_0x485cd6[_0x3cb96f(0x17d)],'pelaku_perjadin':_0x485cd6[_0x3cb96f(0x18d)],'spd':_0x57724f,'um_uf':'VF','nilai':_0x1854e8[_0x3cb96f(0x1a3)],'status':'Pending'};console[_0x3cb96f(0x16a)](_0x37ded3),_0x4bd9ba?await modelKeuangan[_0x3cb96f(0x177)][_0x3cb96f(0x18a)](_0x37ded3,{'where':{'id':_0x4bd9ba['id']}}):(_0x37ded3[_0x3cb96f(0x190)]=_0x3cb96f(0x168),await modelKeuangan['Trasfer'][_0x3cb96f(0x1c8)](_0x37ded3));}}catch(_0x23c3c8){console[_0x3cb96f(0x16a)](_0x23c3c8);}}_0xf5476e?_0x2549eb[_0x3cb96f(0x1f7)]({'status':!![],'message':_0x267810}):_0x2549eb['send']({'status':![],'message':_0x267810});}catch(_0x5e8f88){console[_0x3cb96f(0x16a)](_0x5e8f88),_0x2549eb[_0x3cb96f(0x190)](0x190)[_0x3cb96f(0x1f7)]({'status':![],'message':_0x3cb96f(0x1ce)});}},async 'delete'(_0x1d4b20,_0x3974d6){const _0x3db83d=a3_0x148046;try{const _0x245085=await model[_0x3db83d(0x192)][_0x3db83d(0x16c)]({'where':{'id':_0x1d4b20[_0x3db83d(0x1c3)]['id']}});await sendNotif(_0x3db83d(0x1ea),_0x1d4b20['params']['id'],_0x1d4b20[_0x3db83d(0x1bb)][_0x3db83d(0x1ca)],_0x3db83d(0x171),_0x3db83d(0x1c6),_0x1d4b20[_0x3db83d(0x1d8)]),_0x3974d6[_0x3db83d(0x1f7)]({'status':!![],'data':_0x245085});}catch(_0x2d1055){console[_0x3db83d(0x16a)](_0x2d1055),_0x3974d6[_0x3db83d(0x190)](0x190)[_0x3db83d(0x1f7)]({'status':![],'message':_0x3db83d(0x1ce)});}},async 'revisi'(_0x4502ea,_0x252e4e){const _0x55d546=a3_0x148046;try{const {id:_0x599ff8}=_0x4502ea[_0x55d546(0x1c3)],_0x52a43b=_0x4502ea[_0x55d546(0x183)],_0x45017c=_0x4502ea[_0x55d546(0x183)],_0x17e617=await encodeJwt(_0x52a43b),_0x242c66=await model[_0x55d546(0x1df)]['findOne']({'where':{'bukti_perjalanan_id':_0x599ff8}});if(_0x242c66){if(_0x45017c[_0x55d546(0x204)])try{var _0x2b28b3=await axios[_0x55d546(0x1cd)](process[_0x55d546(0x167)]['GATEWAYE_URL']+_0x55d546(0x17e)+_0x45017c[_0x55d546(0x204)],{'headers':{'Authorization':_0x55d546(0x1d1)+_0x4502ea[_0x55d546(0x1d8)]}});_0x45017c[_0x55d546(0x169)]=_0x2b28b3[_0x55d546(0x1e0)][_0x55d546(0x1e0)];}catch(_0x3e3850){}if(_0x45017c[_0x55d546(0x1ca)])try{var _0x2b28b3=await axios[_0x55d546(0x1cd)](process[_0x55d546(0x167)]['GATEWAYE_URL']+_0x55d546(0x1a1)+_0x45017c['pegawai_id'],{'headers':{'Authorization':_0x55d546(0x1d1)+_0x4502ea['token']}});_0x45017c[_0x55d546(0x1f8)]=_0x2b28b3[_0x55d546(0x1e0)][_0x55d546(0x1e0)];}catch(_0x27bbb7){}if(_0x45017c[_0x55d546(0x1e8)]){const _0x489200=_0x45017c[_0x55d546(0x1e8)][_0x55d546(0x1ab)](_0x6687dd=>_0x6687dd[_0x55d546(0x1f9)]===_0x55d546(0x1fe))[_0x55d546(0x181)]((_0x2a7a48,_0x134bd5)=>_0x2a7a48+_0x134bd5[_0x55d546(0x203)],0x0);_0x45017c[_0x55d546(0x1a0)]=_0x489200;}const _0x4555c6=await encodeJwt(_0x45017c);await Promise[_0x55d546(0x19b)]([model[_0x55d546(0x192)]['update'](_0x52a43b,{'where':{'id':_0x599ff8},'returning':!![]}),model['RevisiBuktiPerjalanan']['update']({'updated':_0x4555c6},{'where':{'bukti_perjalanan_id':_0x599ff8}})]);}else{const _0x14b3bb=await model[_0x55d546(0x192)][_0x55d546(0x1a6)]({'where':{'id':_0x599ff8},'raw':!![]});if(_0x14b3bb[_0x55d546(0x204)])try{var _0x2b28b3=await axios[_0x55d546(0x1cd)](process[_0x55d546(0x167)][_0x55d546(0x1e6)]+'/pengawasan_internal/surat-tugas/'+_0x14b3bb[_0x55d546(0x204)],{'headers':{'Authorization':_0x55d546(0x1d1)+_0x4502ea[_0x55d546(0x1d8)]}});_0x14b3bb[_0x55d546(0x169)]=_0x2b28b3['data'][_0x55d546(0x1e0)];}catch(_0x4eeaeb){}if(_0x14b3bb[_0x55d546(0x1ca)])try{var _0x2b28b3=await axios[_0x55d546(0x1cd)](process[_0x55d546(0x167)][_0x55d546(0x1e6)]+_0x55d546(0x1a1)+_0x14b3bb[_0x55d546(0x1ca)],{'headers':{'Authorization':_0x55d546(0x1d1)+_0x4502ea[_0x55d546(0x1d8)]}});_0x14b3bb['pegawai']=_0x2b28b3[_0x55d546(0x1e0)][_0x55d546(0x1e0)];}catch(_0x3b9d41){}if(_0x14b3bb[_0x55d546(0x1e8)]){const _0x902176=_0x14b3bb[_0x55d546(0x1e8)][_0x55d546(0x1ab)](_0xb40dfe=>_0xb40dfe[_0x55d546(0x1f9)]===_0x55d546(0x1fe))[_0x55d546(0x181)]((_0x307260,_0x1cfab5)=>_0x307260+_0x1cfab5[_0x55d546(0x203)],0x0);_0x14b3bb[_0x55d546(0x1a0)]=_0x902176;}const _0x3f3595=await encodeJwt(_0x14b3bb);await Promise[_0x55d546(0x19b)]([model[_0x55d546(0x192)][_0x55d546(0x18a)](_0x52a43b,{'where':{'id':_0x599ff8},'returning':!![]}),model[_0x55d546(0x1df)]['create']({'bukti_perjalanan_id':_0x599ff8,'old':_0x3f3595,'updated':_0x17e617,'timestamp':Date['now']()})]);}return await sendNotif('form_bukti_perjalanan',_0x599ff8,_0x4502ea['user']['pegawai_id'],_0x55d546(0x171),_0x55d546(0x1a9),_0x4502ea[_0x55d546(0x1d8)]),_0x252e4e['status'](0xc8)[_0x55d546(0x1f7)]({'status':!![],'message':_0x55d546(0x19e)});}catch(_0x406e08){return console[_0x55d546(0x1dd)](_0x406e08),_0x252e4e[_0x55d546(0x190)](0x1f4)[_0x55d546(0x1f7)]({'status':![],'message':'terjadi\x20error'});}},async 'exportBuktiPerjalanan'(_0x13e94e,_0x47fbee){const _0x35d168=a3_0x148046;try{const {page:page=0x1,size:size=0xa,sortby:sortby='createdAt',orderby:orderby=_0x35d168(0x1ac),search:_0x53da3a,byuser:_0x36b8f7}=_0x13e94e[_0x35d168(0x178)];let _0x1e13b1={},_0x80ad81={};if(_0x53da3a){const _0x1978ba=await model[_0x35d168(0x196)][_0x35d168(0x17b)]({'attributes':[_0x35d168(0x204)],'group':[_0x35d168(0x204)]});let _0x2f5182=[];for(let _0x4206fe=0x0;_0x4206fe<_0x1978ba[_0x35d168(0x1d4)];_0x4206fe++){const _0x1e5f10=_0x1978ba[_0x4206fe][_0x35d168(0x1b5)];_0x2f5182[_0x35d168(0x198)](_0x1e5f10['surat_tugas_id']);}const _0x41bc79=await model['FormDpr'][_0x35d168(0x17b)]({'attributes':['pegawai_id'],'group':['pegawai_id']});let _0x3bc6bc=[];for(let _0x1c98ac=0x0;_0x1c98ac<_0x41bc79['length'];_0x1c98ac++){const _0xdee62f=_0x41bc79[_0x1c98ac][_0x35d168(0x1b5)];_0x3bc6bc[_0x35d168(0x198)](_0xdee62f[_0x35d168(0x1ca)]);}const [_0x3b8dc2,_0x15bffc]=await Promise[_0x35d168(0x19b)]([axios['get'](process[_0x35d168(0x167)][_0x35d168(0x1e6)]+_0x35d168(0x1a8)+_0x53da3a+_0x35d168(0x16b)+_0x2f5182,{'headers':{'Authorization':'Bearer\x20'+_0x13e94e[_0x35d168(0x1d8)]}}),axios[_0x35d168(0x1cd)](process[_0x35d168(0x167)][_0x35d168(0x1e6)]+_0x35d168(0x174)+_0x53da3a+_0x35d168(0x16b)+_0x3bc6bc,{'headers':{'Authorization':_0x35d168(0x1d1)+_0x13e94e[_0x35d168(0x1d8)]}})]),_0x28a0a5=_0x3b8dc2[_0x35d168(0x1e0)][_0x35d168(0x1e0)],_0x2e98d5=_0x15bffc[_0x35d168(0x1e0)][_0x35d168(0x1e0)];let _0x5912de=[];for(let _0x4abfe3=0x0;_0x4abfe3<_0x28a0a5[_0x35d168(0x1d4)];_0x4abfe3++){const _0x9945a=_0x28a0a5[_0x4abfe3];_0x5912de[_0x35d168(0x198)](_0x9945a['id']);}_0x5912de['length']>0x0&&(_0x1e13b1[_0x35d168(0x204)]={[Op['in']]:_0x5912de});let _0x23131b=[];for(let _0x4cbe19=0x0;_0x4cbe19<_0x2e98d5[_0x35d168(0x1d4)];_0x4cbe19++){const _0x422a9d=_0x2e98d5[_0x4cbe19];_0x23131b['push'](_0x422a9d['id']);}_0x23131b[_0x35d168(0x1d4)]>0x0&&(_0x1e13b1[_0x35d168(0x1ca)]={[Op['in']]:_0x23131b});}if(_0x13e94e[_0x35d168(0x1bb)][_0x35d168(0x16f)]!==0x1&&_0x13e94e['query'][_0x35d168(0x1cd)]!==_0x35d168(0x19b)){let _0x5aeb83=[];const _0xb526f4=await model[_0x35d168(0x192)]['findAll']({'raw':!![]});for(let _0x3dde44=0x0;_0x3dde44<_0xb526f4[_0x35d168(0x1d4)];_0x3dde44++){const _0x111847=_0xb526f4[_0x3dde44];if(_0x111847['status_ketua']!=='Disetujui'||_0x111847[_0x35d168(0x1b9)]==='Disetujui')try{const _0x67dcf2=await modelPengawasan[_0x35d168(0x1ee)]['findOne']({'where':{'id':_0x111847[_0x35d168(0x204)],'kepada':{[Op['contains']]:[{'pegawai_id':_0x13e94e[_0x35d168(0x1bb)][_0x35d168(0x1ca)]}]}}});_0x67dcf2&&_0x67dcf2['id']===_0x111847[_0x35d168(0x204)]&&_0x5aeb83[_0x35d168(0x198)](_0x111847['id']);}catch(_0x4fadc8){console[_0x35d168(0x16a)](_0x4fadc8);}else{if(_0x111847[_0x35d168(0x1b9)]===_0x35d168(0x1b6)&&_0x13e94e[_0x35d168(0x1bb)][_0x35d168(0x1c5)]===_0x35d168(0x1c2)&&_0x111847['status_evalap']!==_0x35d168(0x1b6))_0x5aeb83[_0x35d168(0x198)](_0x111847['id']);else{if(_0x111847[_0x35d168(0x1b9)]===_0x35d168(0x1b6)&&_0x111847[_0x35d168(0x1f4)]===_0x35d168(0x1b6)&&_0x111847['status_ppk']!==_0x35d168(0x1b6))try{const _0x2ea437=await modelPengawasan['SuratTugas']['findOne']({'where':{'id':_0x111847[_0x35d168(0x204)]}});_0x2ea437&&_0x2ea437['ppk_id']===_0x13e94e[_0x35d168(0x1bb)]['pegawai_id']&&_0x5aeb83[_0x35d168(0x198)](_0x111847['id']);}catch(_0x240115){console[_0x35d168(0x16a)](_0x240115);}}}_0x1e13b1[Op['or']]=[{'pegawai_id':_0x13e94e[_0x35d168(0x1bb)][_0x35d168(0x1ca)]},{'id':{[Op['in']]:_0x5aeb83}}];}}const _0x49d579={'where':_0x1e13b1,'attributes':[_0x35d168(0x204),[sequelize['fn'](_0x35d168(0x197),sequelize[_0x35d168(0x1ed)]('id')),_0x35d168(0x1f0)]],'group':[_0x35d168(0x204)],'raw':!![],'limit':parseInt(size),'offset':(parseInt(page)-0x1)*parseInt(size)},{count:_0x997088,rows:_0x25f299}=await model[_0x35d168(0x192)][_0x35d168(0x1d7)]({..._0x49d579}),_0x332b3a=await Promise[_0x35d168(0x19b)](_0x25f299[_0x35d168(0x1da)](async _0x337a7d=>{const _0x369718=_0x35d168;if(_0x337a7d[_0x369718(0x204)]){_0x337a7d['id']=_0x337a7d[_0x369718(0x204)];try{var _0x56e4de=await axios['get'](process[_0x369718(0x167)]['GATEWAYE_URL']+_0x369718(0x17e)+_0x337a7d[_0x369718(0x204)],{'headers':{'Authorization':_0x369718(0x1d1)+_0x13e94e[_0x369718(0x1d8)]}});_0x337a7d['surat_tugas']=_0x56e4de[_0x369718(0x1e0)][_0x369718(0x1e0)];}catch(_0x16cffd){console[_0x369718(0x16a)](_0x16cffd);}}return _0x337a7d;})),_0x4d1bbc=_0x997088[_0x35d168(0x1d4)],_0x1d30e2=getPagingData({'count':_0x4d1bbc,'rows':_0x332b3a},page,parseInt(size));_0x47fbee[_0x35d168(0x1f7)]({'status':!![],..._0x1d30e2});}catch(_0x52a3e6){console[_0x35d168(0x16a)](_0x52a3e6),_0x47fbee[_0x35d168(0x1f7)]({'status':![],'message':_0x35d168(0x1ce)});}},async 'exportBuktiPerjalananDetail'(_0x47e1e3,_0x1dbba2){const _0x7895ac=a3_0x148046,{id:_0x430292}=_0x47e1e3['params'];try{var _0x11fa53=null,_0x505ecc=await axios[_0x7895ac(0x1cd)](process[_0x7895ac(0x167)][_0x7895ac(0x1e6)]+_0x7895ac(0x17e)+_0x430292,{'headers':{'Authorization':_0x7895ac(0x1d1)+_0x47e1e3[_0x7895ac(0x1d8)]}});_0x11fa53=_0x505ecc[_0x7895ac(0x1e0)]['data'];const _0x56c6a0=await model[_0x7895ac(0x192)][_0x7895ac(0x17b)]({'where':{'surat_tugas_id':_0x430292},'raw':!![]});_0x56c6a0&&(_0x11fa53[_0x7895ac(0x1e1)]=_0x56c6a0,_0x11fa53[_0x7895ac(0x1e1)]=await Promise[_0x7895ac(0x19b)](_0x11fa53[_0x7895ac(0x1e1)][_0x7895ac(0x1da)](async _0x5d8428=>{const _0x273776=_0x7895ac;if(_0x5d8428['pegawai_id'])try{var _0x4923df=await axios[_0x273776(0x1cd)](process[_0x273776(0x167)]['GATEWAYE_URL']+_0x273776(0x1a1)+_0x5d8428[_0x273776(0x1ca)],{'headers':{'Authorization':_0x273776(0x1d1)+_0x47e1e3[_0x273776(0x1d8)]}});_0x5d8428[_0x273776(0x1f8)]=_0x4923df['data'][_0x273776(0x1e0)];}catch(_0xa9a124){}if(_0x5d8428[_0x273776(0x204)]&&_0x5d8428[_0x273776(0x1ca)])try{const _0x3404e7=await modelKeuangan[_0x273776(0x177)][_0x273776(0x17b)]({'where':{'surat_tugas_id':_0x5d8428[_0x273776(0x204)],'pegawai_id':_0x5d8428[_0x273776(0x1ca)]},'raw':!![]});_0x5d8428['transfer']=_0x3404e7;}catch(_0x439ad7){console[_0x273776(0x16a)](_0x439ad7);}if(_0x5d8428[_0x273776(0x1aa)])try{var _0x4923df=await axios['get'](process[_0x273776(0x167)]['GATEWAYE_URL']+'/kepegawaian/data-tenaga-audit/'+_0x5d8428[_0x273776(0x1aa)],{'headers':{'Authorization':_0x273776(0x1d1)+_0x47e1e3[_0x273776(0x1d8)]}});_0x5d8428[_0x273776(0x1d2)]=_0x4923df[_0x273776(0x1e0)]['data'];}catch(_0x2b8add){}return _0x5d8428;}))),_0x1dbba2[_0x7895ac(0x1f7)]({'status':!![],'data':_0x11fa53});}catch(_0x2dd04a){console[_0x7895ac(0x16a)](_0x2dd04a),_0x1dbba2[_0x7895ac(0x1f7)]({'status':![],'message':_0x7895ac(0x1ce)});}}};