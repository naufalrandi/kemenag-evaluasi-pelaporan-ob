const a4_0x2003d9=a4_0xf90e;(function(_0x3467a9,_0x48e06e){const _0x5ac2ad=a4_0xf90e,_0x47cd9e=_0x3467a9();while(!![]){try{const _0x1e0704=parseInt(_0x5ac2ad(0x19b))/0x1+-parseInt(_0x5ac2ad(0x199))/0x2+-parseInt(_0x5ac2ad(0x181))/0x3*(-parseInt(_0x5ac2ad(0x1c3))/0x4)+-parseInt(_0x5ac2ad(0x19f))/0x5+parseInt(_0x5ac2ad(0x18f))/0x6+parseInt(_0x5ac2ad(0x188))/0x7+-parseInt(_0x5ac2ad(0x1af))/0x8;if(_0x1e0704===_0x48e06e)break;else _0x47cd9e['push'](_0x47cd9e['shift']());}catch(_0x22696d){_0x47cd9e['push'](_0x47cd9e['shift']());}}}(a4_0x3cdb,0xc9e30));const {Op}=require('sequelize'),model=require(a4_0x2003d9(0x1b5)),{default:axios}=require(a4_0x2003d9(0x1ab)),{sendNotif}=require('../helpers/custom'),modelPengawasan=require('../models/pengawasan-internal/index'),modelKepegawaian=require(a4_0x2003d9(0x17e)),moment=require(a4_0x2003d9(0x1ae));moment[a4_0x2003d9(0x1a7)](a4_0x2003d9(0x186));const getPaginationTable=(_0x3188a9,_0x45cb61)=>{const _0x1752bd=_0x45cb61?+_0x45cb61:0xa,_0x684b4f=_0x3188a9?Math['ceil'](_0x3188a9-0x1)*_0x1752bd:0x0;return{'limit':_0x1752bd,'offset':_0x684b4f};},getPagingData=(_0x25c30f,_0xa2520c,_0x2c952f)=>{const _0x3ad2da=a4_0x2003d9,{count:_0x49222d,rows:_0x1024b4}=_0x25c30f,_0x133ec9=_0xa2520c?+_0xa2520c:0x0,_0x524e6e=Math[_0x3ad2da(0x198)](_0x49222d/_0x2c952f);return{'totalItems':_0x49222d,'data':_0x1024b4,'totalPages':_0x524e6e,'currentPage':_0x133ec9};},getPagination=(_0x12f3bf,_0x44abc)=>{const _0x4df700=a4_0x2003d9,_0x3f71ed=_0x44abc?+_0x44abc:0xa,_0x4d8018=_0x12f3bf?Math[_0x4df700(0x198)](_0x12f3bf-0x1)*_0x3f71ed:0x0;return{'limit':_0x3f71ed,'offset':_0x4d8018};},formatTanggal=_0x4acd3a=>{const _0x96c6cc=a4_0x2003d9,_0x14a2b2=moment(_0x4acd3a[_0x96c6cc(0x17b)])[_0x96c6cc(0x176)](_0x96c6cc(0x1a9)),_0x2bfa85=_0x4acd3a[_0x96c6cc(0x1a6)]?moment(_0x4acd3a[_0x96c6cc(0x1a6)])[_0x96c6cc(0x176)](_0x96c6cc(0x1a9)):'-';let _0x5a28d5=_0x2bfa85!=='-'?_0x2bfa85:_0x14a2b2;if(_0x2bfa85!=='-'){_0x5a28d5='-\x20'+_0x2bfa85;let _0x534000=_0x14a2b2[_0x96c6cc(0x1bf)]('\x20');const _0x5a2c43=_0x2bfa85[_0x96c6cc(0x1bf)]('\x20');for(let _0x1f9c14=_0x534000['length']-0x1;_0x1f9c14>=0x0;_0x1f9c14--){_0x534000[_0x1f9c14]===_0x5a2c43[_0x1f9c14]&&_0x534000['pop']();}_0x5a28d5=_0x534000['join']('\x20')+_0x96c6cc(0x1b3)+_0x2bfa85;}return _0x5a28d5;};function a4_0xf90e(_0x3533a7,_0x35e063){const _0x3cdb93=a4_0x3cdb();return a4_0xf90e=function(_0xf90e92,_0xb37b6b){_0xf90e92=_0xf90e92-0x175;let _0x2afb10=_0x3cdb93[_0xf90e92];return _0x2afb10;},a4_0xf90e(_0x3533a7,_0x35e063);}module[a4_0x2003d9(0x1b8)]={async 'index'(_0x44850a,_0x53a550){const _0x1b8398=a4_0x2003d9,_0x1ca76e=_0x44850a['body'][_0x1b8398(0x182)]||_0x44850a[_0x1b8398(0x1a0)][_0x1b8398(0x182)]||_0x44850a['headers'][_0x1b8398(0x1ad)]||_0x44850a[_0x1b8398(0x179)]['authorization'];try{const {page:page=0x1,size:size=0xa,sortby:sortby=_0x1b8398(0x1b7),orderby:orderby=_0x1b8398(0x194),search:_0x41db45,byuser:_0x310c60}=_0x44850a[_0x1b8398(0x1a0)],{limit:_0x1840ba,offset:_0x195605}=getPagination(page,size);let _0x37bfb6={};if(_0x41db45){const _0x263280=await model[_0x1b8398(0x18e)][_0x1b8398(0x1b0)]({'attributes':[_0x1b8398(0x1a4)],'group':[_0x1b8398(0x1a4)]});let _0x35b035=[];for(let _0x5e463e=0x0;_0x5e463e<_0x263280[_0x1b8398(0x1b1)];_0x5e463e++){const _0x5622d3=_0x263280[_0x5e463e][_0x1b8398(0x19a)];_0x35b035[_0x1b8398(0x183)](_0x5622d3[_0x1b8398(0x1a4)]);}const _0x472296=await model[_0x1b8398(0x18e)][_0x1b8398(0x1b0)]({'attributes':[_0x1b8398(0x17c)],'group':['pegawai_id']});let _0x48d4db=[];for(let _0x9375ff=0x0;_0x9375ff<_0x472296[_0x1b8398(0x1b1)];_0x9375ff++){const _0x14e2cc=_0x472296[_0x9375ff][_0x1b8398(0x19a)];_0x48d4db['push'](_0x14e2cc[_0x1b8398(0x17c)]);}const [_0x210653,_0x2a6aae]=await Promise[_0x1b8398(0x1b9)]([axios[_0x1b8398(0x190)](process[_0x1b8398(0x175)][_0x1b8398(0x1a1)]+_0x1b8398(0x1aa)+_0x41db45+_0x1b8398(0x184)+_0x35b035,{'headers':{'Authorization':_0x1b8398(0x1c5)+_0x44850a[_0x1b8398(0x1a2)]}}),axios[_0x1b8398(0x190)](process[_0x1b8398(0x175)][_0x1b8398(0x1a1)]+_0x1b8398(0x1bb)+_0x41db45+'&arrid='+_0x48d4db,{'headers':{'Authorization':'Bearer\x20'+_0x44850a[_0x1b8398(0x1a2)]}})]),_0x3fc092=_0x210653[_0x1b8398(0x180)][_0x1b8398(0x180)],_0x2a0977=_0x2a6aae[_0x1b8398(0x180)][_0x1b8398(0x180)];let _0x1f2345=[];for(let _0x3d8b9b=0x0;_0x3d8b9b<_0x3fc092[_0x1b8398(0x1b1)];_0x3d8b9b++){const _0x10560b=_0x3fc092[_0x3d8b9b];_0x1f2345[_0x1b8398(0x183)](_0x10560b['id']);}_0x1f2345[_0x1b8398(0x1b1)]>0x0&&(_0x37bfb6[_0x1b8398(0x1a4)]={[Op['in']]:_0x1f2345});let _0x332882=[];for(let _0x1382c7=0x0;_0x1382c7<_0x2a0977[_0x1b8398(0x1b1)];_0x1382c7++){const _0x343085=_0x2a0977[_0x1382c7];_0x332882['push'](_0x343085['id']);}_0x332882[_0x1b8398(0x1b1)]>0x0&&(_0x37bfb6[_0x1b8398(0x17c)]={[Op['in']]:_0x332882});}_0x44850a[_0x1b8398(0x19d)]['role_id']!==0x1&&_0x44850a[_0x1b8398(0x1a0)][_0x1b8398(0x190)]!=_0x1b8398(0x1b9)&&(_0x37bfb6[_0x1b8398(0x17c)]=_0x44850a['user'][_0x1b8398(0x17c)]);const {rows:_0x14dab5,count:_0x5e7ec7}=await model[_0x1b8398(0x18e)]['findAndCountAll']({'where':_0x37bfb6,'order':[[sortby,orderby]],'limit':_0x1840ba,'offset':_0x195605}),_0x15df5d=await Promise[_0x1b8398(0x1b9)](_0x14dab5[_0x1b8398(0x1ba)](async _0x1f1c18=>{const _0x37a9df=_0x1b8398,_0xae0e1b=_0x1f1c18[_0x37a9df(0x19a)];_0xae0e1b[_0x37a9df(0x18a)]=null;if(_0xae0e1b[_0x37a9df(0x17c)])try{const _0x4f2fe4=await modelKepegawaian['TenagaAudit'][_0x37a9df(0x185)]({'where':{'id':_0xae0e1b[_0x37a9df(0x17c)]}});_0xae0e1b['pegawai']=_0x4f2fe4;}catch(_0x50aea7){console['log'](_0x50aea7);}_0xae0e1b[_0x37a9df(0x18d)]=null;if(_0xae0e1b[_0x37a9df(0x1a4)])try{const _0x5af356=await modelPengawasan[_0x37a9df(0x18c)][_0x37a9df(0x185)]({'where':{'id':_0xae0e1b[_0x37a9df(0x1a4)]}});_0xae0e1b[_0x37a9df(0x18d)]=_0x5af356;}catch(_0x298fb4){}return _0xae0e1b[_0x37a9df(0x1bc)]=formatTanggal(_0xae0e1b),_0xae0e1b['total_pengeluaran']=_0xae0e1b[_0x37a9df(0x17f)][_0x37a9df(0x192)]((_0x7927cb,_0x818fe7)=>_0x7927cb+_0x818fe7[_0x37a9df(0x196)],0x0)||0x0,_0xae0e1b;})),_0x1230b1=getPagingData({'rows':_0x15df5d,'count':_0x5e7ec7},page,_0x1840ba);_0x53a550['send']({'status':!![],..._0x1230b1});}catch(_0x7beed){console['log'](_0x7beed),_0x53a550['status'](0x190)[_0x1b8398(0x1c0)]({'status':![],'message':'terjadi\x20error'});}},async 'add'(_0x522952,_0x1ab6ed){const _0x3b93d4=a4_0x2003d9,_0x339798=_0x522952['body']['api_token']||_0x522952[_0x3b93d4(0x1a0)]['api_token']||_0x522952[_0x3b93d4(0x179)][_0x3b93d4(0x1ad)]||_0x522952[_0x3b93d4(0x179)]['authorization'];try{var _0x41832c=_0x522952[_0x3b93d4(0x193)];(_0x41832c[_0x3b93d4(0x17c)]==''||!_0x41832c[_0x3b93d4(0x17c)])&&(_0x41832c[_0x3b93d4(0x17c)]=_0x522952['user'][_0x3b93d4(0x17c)]);const _0x3b498f=await model[_0x3b93d4(0x18e)][_0x3b93d4(0x1b6)](_0x41832c);await sendNotif(_0x3b93d4(0x1a3),_0x3b498f['id'],_0x522952[_0x3b93d4(0x19d)][_0x3b93d4(0x17c)],_0x3b93d4(0x195),_0x3b93d4(0x177),_0x522952['token']),_0x1ab6ed['send']({'status':!![],'data':_0x3b498f});}catch(_0x4ac2c6){console[_0x3b93d4(0x189)](_0x4ac2c6),_0x1ab6ed[_0x3b93d4(0x1c6)](0x190)[_0x3b93d4(0x1c0)]({'status':![],'message':_0x3b93d4(0x1be)});}},async 'detail'(_0x1c47fe,_0x990a35){const _0x3a6f13=a4_0x2003d9,_0x2f8196=_0x1c47fe[_0x3a6f13(0x193)][_0x3a6f13(0x182)]||_0x1c47fe[_0x3a6f13(0x1a0)][_0x3a6f13(0x182)]||_0x1c47fe[_0x3a6f13(0x179)][_0x3a6f13(0x1ad)]||_0x1c47fe[_0x3a6f13(0x179)][_0x3a6f13(0x191)];try{const _0x5a0d57=await model[_0x3a6f13(0x18e)][_0x3a6f13(0x185)]({'where':{'id':_0x1c47fe[_0x3a6f13(0x17d)]['id']},'raw':!![]}),_0x23d917=_0x5a0d57 instanceof model[_0x3a6f13(0x18e)]?_0x5a0d57[_0x3a6f13(0x19a)]:_0x5a0d57,_0x1a5f76=[];for(let _0xb2f331=0x0;_0xb2f331<_0x23d917[_0x3a6f13(0x17f)][_0x3a6f13(0x1b1)];_0xb2f331++){const _0x4bb54b=_0x23d917[_0x3a6f13(0x17f)][_0xb2f331];_0x4bb54b[_0x3a6f13(0x1ac)]=_0x4bb54b[_0x3a6f13(0x1b2)],_0x1a5f76[_0x3a6f13(0x183)](_0x4bb54b);}_0x23d917['list_pengeluaran']=_0x1a5f76,_0x23d917[_0x3a6f13(0x18a)]=null;if(_0x23d917[_0x3a6f13(0x17c)])try{var _0x1b3de2=await axios[_0x3a6f13(0x190)](process[_0x3a6f13(0x175)]['GATEWAYE_URL']+_0x3a6f13(0x1c2)+_0x23d917[_0x3a6f13(0x17c)],{'headers':{'Authorization':'Bearer\x20'+_0x1c47fe['token']}});_0x23d917[_0x3a6f13(0x18a)]=_0x1b3de2[_0x3a6f13(0x180)]['data'];}catch(_0x29b00d){}_0x23d917['surat_tugas']=null;if(_0x23d917['surat_tugas_id'])try{var _0x1b3de2=await axios[_0x3a6f13(0x190)](process[_0x3a6f13(0x175)][_0x3a6f13(0x1a1)]+_0x3a6f13(0x1a8)+_0x23d917[_0x3a6f13(0x1a4)],{'headers':{'Authorization':_0x3a6f13(0x1c5)+_0x1c47fe['token']}});_0x23d917[_0x3a6f13(0x18d)]=_0x1b3de2[_0x3a6f13(0x180)][_0x3a6f13(0x180)];}catch(_0x12d741){}if(_0x23d917['surat_tugas_id'])try{const _0x2d5dc6=await modelPengawasan[_0x3a6f13(0x19e)][_0x3a6f13(0x185)]({'where':{'surat_tugas_id':_0x23d917[_0x3a6f13(0x1a4)]}});_0x23d917[_0x3a6f13(0x17a)]=_0x2d5dc6;}catch(_0x4663f9){console['log'](_0x4663f9);}return _0x23d917['format_tanggal']=formatTanggal(_0x23d917),_0x23d917[_0x3a6f13(0x1b4)]=_0x23d917[_0x3a6f13(0x17f)][_0x3a6f13(0x192)]((_0x1eaed6,_0x1af382)=>_0x1eaed6+_0x1af382['jumlah'],0x0)||0x0,_0x990a35[_0x3a6f13(0x1c0)]({'status':!![],'data':_0x23d917});}catch(_0x8ca288){return console[_0x3a6f13(0x189)](_0x8ca288),_0x990a35[_0x3a6f13(0x1c0)]({'status':![],'message':_0x3a6f13(0x1be)});}},async 'update'(_0x3f8a7c,_0x3b33da){const _0x305a88=a4_0x2003d9,_0x37ca06=_0x3f8a7c['body'][_0x305a88(0x182)]||_0x3f8a7c[_0x305a88(0x1a0)]['api_token']||_0x3f8a7c[_0x305a88(0x179)][_0x305a88(0x1ad)]||_0x3f8a7c[_0x305a88(0x179)]['authorization'];try{var _0x3aebdd=_0x3f8a7c[_0x305a88(0x193)];(_0x3aebdd['pegawai_id']==''||!_0x3aebdd[_0x305a88(0x17c)])&&(_0x3aebdd['pegawai_id']=_0x3f8a7c[_0x305a88(0x19d)][_0x305a88(0x17c)]);const _0x3e6377=await model[_0x305a88(0x18e)]['update'](_0x3aebdd,{'where':{'id':_0x3f8a7c[_0x305a88(0x17d)]['id']}});await sendNotif('form_dpr',_0x3f8a7c[_0x305a88(0x17d)]['id'],_0x3f8a7c[_0x305a88(0x19d)][_0x305a88(0x17c)],_0x305a88(0x195),_0x305a88(0x1a5),_0x3f8a7c[_0x305a88(0x1a2)]),_0x3b33da[_0x305a88(0x1c0)]({'status':!![],'data':_0x3e6377});}catch(_0x4f37e8){console[_0x305a88(0x189)](_0x4f37e8),_0x3b33da[_0x305a88(0x1c6)](0x190)['send']({'status':![],'message':_0x305a88(0x1be)});}},async 'detail_status'(_0x44ed5c,_0x3a0872){const _0xc2a127=a4_0x2003d9;try{const _0x55f12f=await model[_0xc2a127(0x18e)][_0xc2a127(0x185)]({'where':{'id':_0x44ed5c[_0xc2a127(0x17d)]['id']}});var _0x123713=_0x55f12f[_0xc2a127(0x19a)];_0x3a0872[_0xc2a127(0x1c0)]({'status':!![],'data':_0x123713});}catch(_0x279a85){console[_0xc2a127(0x189)](_0x279a85),_0x3a0872[_0xc2a127(0x1c6)](0x190)['send']({'status':![],'message':_0xc2a127(0x1be)});}},async 'update_status'(_0x49c6d1,_0x372591){const _0x1913dc=a4_0x2003d9;try{const _0x5433ec=_0x49c6d1[_0x1913dc(0x193)];_0x5433ec[_0x1913dc(0x1c7)]&&(_0x5433ec[_0x1913dc(0x1c4)]=_0x49c6d1['user'][_0x1913dc(0x17c)],_0x5433ec[_0x1913dc(0x18b)]=moment()['format'](_0x1913dc(0x1c1)));_0x5433ec[_0x1913dc(0x197)]&&(_0x5433ec[_0x1913dc(0x178)]=_0x49c6d1[_0x1913dc(0x19d)]['pegawai_id'],_0x5433ec['status_bendahara_tgl']=moment()[_0x1913dc(0x176)](_0x1913dc(0x1c1)));const _0x41ee5c=await model['FormDpr'][_0x1913dc(0x187)](_0x5433ec,{'where':{'id':_0x49c6d1['params']['id']}});_0x372591['send']({'status':!![],'data':_0x41ee5c});}catch(_0x447436){console[_0x1913dc(0x189)](_0x447436),_0x372591[_0x1913dc(0x1c6)](0x190)[_0x1913dc(0x1c0)]({'status':![],'message':_0x1913dc(0x1be)});}},async 'delete'(_0x1f665c,_0x3df157){const _0x51e5b3=a4_0x2003d9;try{const _0x5e6480=await model[_0x51e5b3(0x18e)][_0x51e5b3(0x1bd)]({'where':{'id':_0x1f665c[_0x51e5b3(0x17d)]['id']}});await sendNotif(_0x51e5b3(0x1a3),_0x1f665c[_0x51e5b3(0x17d)]['id'],_0x1f665c['user'][_0x51e5b3(0x17c)],_0x51e5b3(0x195),_0x51e5b3(0x19c),_0x1f665c['token']),_0x3df157[_0x51e5b3(0x1c0)]({'status':!![],'data':_0x5e6480});}catch(_0x117dbe){console['log'](_0x117dbe),_0x3df157[_0x51e5b3(0x1c6)](0x190)[_0x51e5b3(0x1c0)]({'status':![],'message':_0x51e5b3(0x1be)});}}};function a4_0x3cdb(){const _0x1de1b2=['id-ID','update','6558104wFVwwW','log','pegawai','status_evalap_tgl','SuratTugas','surat_tugas','FormDpr','5142102DgaYUr','get','authorization','reduce','body','desc','Form\x20DPR','jumlah','status_bendahara','ceil','304454xjjOrV','dataValues','1554812UxbqSC','Menghapus\x20Form\x20DPR','user','SuratPerjalananDinas','3536465peizlO','query','GATEWAYE_URL','token','form_dpr','surat_tugas_id','Mengubah\x20Form\x20DPR','tanggal_selesai','locale','/pengawasan_internal/surat-tugas/','D\x20MMMM\x20YYYY','/pengawasan_internal/surat-tugas?get=all&search=','axios','uraian','x-access-token','moment','18815984CPOnEq','findAll','length','Uraian','\x20-\x20','total_pengeluaran','../models/index','create','createdAt','exports','all','map','/kepegawaian/data-tenaga-audit?get=all&search=','format_tanggal','destroy','terjadi\x20error','split','send','YYYY-MM-DD\x20HH:mm:ss','/kepegawaian/data-tenaga-audit/','26276AtKKSQ','evalap_id','Bearer\x20','status','status_evalap','env','format','Menambah\x20Form\x20DPR','bendahara_id','headers','spd','tanggal_mulai','pegawai_id','params','../models/kepegawaian/index','list_pengeluaran','data','315kLtUAX','api_token','push','&arrid=','findOne'];a4_0x3cdb=function(){return _0x1de1b2;};return a4_0x3cdb();}