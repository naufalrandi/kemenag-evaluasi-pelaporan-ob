function a4_0x4ca4(_0x22c660,_0xc289f9){const _0x2c0fb7=a4_0x2c0f();return a4_0x4ca4=function(_0x4ca461,_0xd82f83){_0x4ca461=_0x4ca461-0x75;let _0x4c3a6c=_0x2c0fb7[_0x4ca461];return _0x4c3a6c;},a4_0x4ca4(_0x22c660,_0xc289f9);}const a4_0x2848da=a4_0x4ca4;(function(_0x469069,_0x261527){const _0xbf2226=a4_0x4ca4,_0x135c0f=_0x469069();while(!![]){try{const _0x158950=parseInt(_0xbf2226(0xc0))/0x1+parseInt(_0xbf2226(0xbf))/0x2+-parseInt(_0xbf2226(0x9d))/0x3*(-parseInt(_0xbf2226(0x7a))/0x4)+parseInt(_0xbf2226(0xae))/0x5+-parseInt(_0xbf2226(0xb0))/0x6+-parseInt(_0xbf2226(0x9a))/0x7+parseInt(_0xbf2226(0x8b))/0x8*(-parseInt(_0xbf2226(0xa9))/0x9);if(_0x158950===_0x261527)break;else _0x135c0f['push'](_0x135c0f['shift']());}catch(_0x1c1f05){_0x135c0f['push'](_0x135c0f['shift']());}}}(a4_0x2c0f,0x514fb));const {Op}=require('sequelize'),model=require(a4_0x2848da(0xa3)),{default:axios}=require(a4_0x2848da(0x7d)),{sendNotif}=require(a4_0x2848da(0x92)),modelPengawasan=require('../models/pengawasan-internal/index'),modelKepegawaian=require(a4_0x2848da(0xaa)),moment=require(a4_0x2848da(0xa0));function a4_0x2c0f(){const _0x129bc5=['log','format','pop','push','uraian','token','tanggal_mulai','all','pegawai','get','FormDpr','19664cQXQpP','locale','dataValues','axios','query','create','headers','update','env','join','findAndCountAll','Uraian','SuratPerjalananDinas','terjadi\x20error','authorization','list_pengeluaran','destroy','16aMwygQ','Menambah\x20Form\x20DPR','user','desc','body','length','surat_tugas','../helpers/custom','status_evalap_tgl','YYYY-MM-DD\x20HH:mm:ss','/kepegawaian/data-tenaga-audit?get=all&search=','createdAt','status','format_tanggal','findAll','349622ntewlY','tanggal_selesai','x-access-token','255MFMWhG','GATEWAYE_URL','role_id','moment','id-ID','bendahara_id','../models/index','map','send','status_bendahara_tgl','findOne','reduce','4657977EDjVSc','../models/kepegawaian/index','D\x20MMMM\x20YYYY','pegawai_id','jumlah','2451685hhfXxs','data','1712388jtzKwt','params','evalap_id','&arrid=','total_pengeluaran','surat_tugas_id','exports','/pengawasan_internal/surat-tugas?get=all&search=','Mengubah\x20Form\x20DPR','Bearer\x20','Form\x20DPR','api_token','ceil','form_dpr','split','951080StNsHY','319764CfAtdV'];a4_0x2c0f=function(){return _0x129bc5;};return a4_0x2c0f();}moment[a4_0x2848da(0x7b)](a4_0x2848da(0xa1));const getPaginationTable=(_0x3b18af,_0x382c08)=>{const _0x4c51b2=a4_0x2848da,_0x86c49c=_0x382c08?+_0x382c08:0xa,_0x3a3fa7=_0x3b18af?Math[_0x4c51b2(0xbc)](_0x3b18af-0x1)*_0x86c49c:0x0;return{'limit':_0x86c49c,'offset':_0x3a3fa7};},getPagingData=(_0x52ed17,_0x4bc1da,_0x411582)=>{const _0x47e4fd=a4_0x2848da,{count:_0x12ac3f,rows:_0x5f02f2}=_0x52ed17,_0x228397=_0x4bc1da?+_0x4bc1da:0x0,_0x15eadb=Math[_0x47e4fd(0xbc)](_0x12ac3f/_0x411582);return{'totalItems':_0x12ac3f,'data':_0x5f02f2,'totalPages':_0x15eadb,'currentPage':_0x228397};},getPagination=(_0x3a6fd6,_0x25e2a0)=>{const _0x5232c0=_0x25e2a0?+_0x25e2a0:0xa,_0x460d68=_0x3a6fd6?Math['ceil'](_0x3a6fd6-0x1)*_0x5232c0:0x0;return{'limit':_0x5232c0,'offset':_0x460d68};},formatTanggal=_0x23140d=>{const _0x46af1a=a4_0x2848da,_0x4ce8d8=moment(_0x23140d[_0x46af1a(0x75)])[_0x46af1a(0xc2)](_0x46af1a(0xab)),_0x13b41e=_0x23140d[_0x46af1a(0x9b)]?moment(_0x23140d[_0x46af1a(0x9b)])[_0x46af1a(0xc2)](_0x46af1a(0xab)):'-';let _0x58e43e=_0x13b41e!=='-'?_0x13b41e:_0x4ce8d8;if(_0x13b41e!=='-'){_0x58e43e='-\x20'+_0x13b41e;let _0x422419=_0x4ce8d8[_0x46af1a(0xbe)]('\x20');const _0x1202cd=_0x13b41e['split']('\x20');for(let _0x48e518=_0x422419[_0x46af1a(0x90)]-0x1;_0x48e518>=0x0;_0x48e518--){_0x422419[_0x48e518]===_0x1202cd[_0x48e518]&&_0x422419[_0x46af1a(0xc3)]();}_0x58e43e=_0x422419[_0x46af1a(0x83)]('\x20')+'\x20-\x20'+_0x13b41e;}return _0x58e43e;};module[a4_0x2848da(0xb6)]={async 'index'(_0x31a757,_0x28a2ef){const _0x380ac8=a4_0x2848da,_0x13a373=_0x31a757[_0x380ac8(0x8f)][_0x380ac8(0xbb)]||_0x31a757[_0x380ac8(0x7e)][_0x380ac8(0xbb)]||_0x31a757[_0x380ac8(0x80)][_0x380ac8(0x9c)]||_0x31a757['headers']['authorization'];try{const {page:page=0x1,size:size=0xa,sortby:sortby=_0x380ac8(0x96),orderby:orderby=_0x380ac8(0x8e),search:_0x2c68d0,byuser:_0x4e83c8}=_0x31a757[_0x380ac8(0x7e)],{limit:_0x17d43e,offset:_0x348b2d}=getPagination(page,size);let _0x11a6b7={};if(_0x2c68d0){const _0x2d18d5=await model[_0x380ac8(0x79)][_0x380ac8(0x99)]({'attributes':[_0x380ac8(0xb5)],'group':[_0x380ac8(0xb5)]});let _0x16b741=[];for(let _0x59f9bf=0x0;_0x59f9bf<_0x2d18d5['length'];_0x59f9bf++){const _0x39b2e0=_0x2d18d5[_0x59f9bf][_0x380ac8(0x7c)];_0x16b741[_0x380ac8(0xc4)](_0x39b2e0[_0x380ac8(0xb5)]);}const _0x2a5a7a=await model[_0x380ac8(0x79)][_0x380ac8(0x99)]({'attributes':[_0x380ac8(0xac)],'group':['pegawai_id']});let _0x2a2083=[];for(let _0x187008=0x0;_0x187008<_0x2a5a7a[_0x380ac8(0x90)];_0x187008++){const _0x396d80=_0x2a5a7a[_0x187008][_0x380ac8(0x7c)];_0x2a2083['push'](_0x396d80['pegawai_id']);}const [_0x194963,_0x226d2c]=await Promise[_0x380ac8(0x76)]([axios['get'](process[_0x380ac8(0x82)]['GATEWAYE_URL']+_0x380ac8(0xb7)+_0x2c68d0+_0x380ac8(0xb3)+_0x16b741,{'headers':{'Authorization':_0x380ac8(0xb9)+_0x31a757[_0x380ac8(0xc6)]}}),axios[_0x380ac8(0x78)](process[_0x380ac8(0x82)][_0x380ac8(0x9e)]+_0x380ac8(0x95)+_0x2c68d0+_0x380ac8(0xb3)+_0x2a2083,{'headers':{'Authorization':_0x380ac8(0xb9)+_0x31a757[_0x380ac8(0xc6)]}})]),_0x225521=_0x194963[_0x380ac8(0xaf)][_0x380ac8(0xaf)],_0x1cc3f5=_0x226d2c[_0x380ac8(0xaf)][_0x380ac8(0xaf)];let _0x59592e=[];for(let _0x567099=0x0;_0x567099<_0x225521[_0x380ac8(0x90)];_0x567099++){const _0x500cb7=_0x225521[_0x567099];_0x59592e['push'](_0x500cb7['id']);}_0x59592e[_0x380ac8(0x90)]>0x0&&(_0x11a6b7[_0x380ac8(0xb5)]={[Op['in']]:_0x59592e});let _0x32edec=[];for(let _0x238e10=0x0;_0x238e10<_0x1cc3f5['length'];_0x238e10++){const _0x14d5ab=_0x1cc3f5[_0x238e10];_0x32edec[_0x380ac8(0xc4)](_0x14d5ab['id']);}_0x32edec['length']>0x0&&(_0x11a6b7[_0x380ac8(0xac)]={[Op['in']]:_0x32edec});}_0x31a757['user'][_0x380ac8(0x9f)]!==0x1&&_0x31a757[_0x380ac8(0x7e)]['get']!=_0x380ac8(0x76)&&(_0x11a6b7['pegawai_id']=_0x31a757['user'][_0x380ac8(0xac)]);const {rows:_0x658a,count:_0x5d7cf4}=await model['FormDpr'][_0x380ac8(0x84)]({'where':_0x11a6b7,'order':[[sortby,orderby]],'limit':_0x17d43e,'offset':_0x348b2d}),_0x2cf197=await Promise['all'](_0x658a[_0x380ac8(0xa4)](async _0xb3f8bb=>{const _0x1ba770=_0x380ac8,_0x4dd53f=_0xb3f8bb['dataValues'];_0x4dd53f[_0x1ba770(0x77)]=null;if(_0x4dd53f['pegawai_id'])try{const _0x2c3ed7=await modelKepegawaian['TenagaAudit'][_0x1ba770(0xa7)]({'where':{'id':_0x4dd53f['pegawai_id']}});_0x4dd53f[_0x1ba770(0x77)]=_0x2c3ed7;}catch(_0x5e037){console[_0x1ba770(0xc1)](_0x5e037);}_0x4dd53f[_0x1ba770(0x91)]=null;if(_0x4dd53f['surat_tugas_id'])try{const _0x2b06f5=await modelPengawasan['SuratTugas'][_0x1ba770(0xa7)]({'where':{'id':_0x4dd53f[_0x1ba770(0xb5)]}});_0x4dd53f[_0x1ba770(0x91)]=_0x2b06f5;}catch(_0x13b35c){}return _0x4dd53f[_0x1ba770(0x98)]=formatTanggal(_0x4dd53f),_0x4dd53f[_0x1ba770(0xb4)]=_0x4dd53f['list_pengeluaran'][_0x1ba770(0xa8)]((_0x1db2a8,_0x165222)=>_0x1db2a8+_0x165222['jumlah'],0x0)||0x0,_0x4dd53f;})),_0x480500=getPagingData({'rows':_0x2cf197,'count':_0x5d7cf4},page,_0x17d43e);_0x28a2ef[_0x380ac8(0xa5)]({'status':!![],..._0x480500});}catch(_0x45ac20){console[_0x380ac8(0xc1)](_0x45ac20),_0x28a2ef['status'](0x190)[_0x380ac8(0xa5)]({'status':![],'message':_0x380ac8(0x87)});}},async 'add'(_0x2ccd7a,_0x531420){const _0x3461b5=a4_0x2848da,_0x2709d8=_0x2ccd7a['body'][_0x3461b5(0xbb)]||_0x2ccd7a[_0x3461b5(0x7e)][_0x3461b5(0xbb)]||_0x2ccd7a[_0x3461b5(0x80)]['x-access-token']||_0x2ccd7a[_0x3461b5(0x80)]['authorization'];try{var _0x36a95f=_0x2ccd7a[_0x3461b5(0x8f)];(_0x36a95f[_0x3461b5(0xac)]==''||!_0x36a95f[_0x3461b5(0xac)])&&(_0x36a95f[_0x3461b5(0xac)]=_0x2ccd7a[_0x3461b5(0x8d)]['pegawai_id']);const _0x587a44=await model[_0x3461b5(0x79)][_0x3461b5(0x7f)](_0x36a95f);await sendNotif(_0x3461b5(0xbd),_0x587a44['id'],_0x2ccd7a[_0x3461b5(0x8d)][_0x3461b5(0xac)],_0x3461b5(0xba),_0x3461b5(0x8c),_0x2ccd7a[_0x3461b5(0xc6)]),_0x531420[_0x3461b5(0xa5)]({'status':!![],'data':_0x587a44});}catch(_0x48ed7b){console['log'](_0x48ed7b),_0x531420[_0x3461b5(0x97)](0x190)[_0x3461b5(0xa5)]({'status':![],'message':'terjadi\x20error'});}},async 'detail'(_0x42e4aa,_0x411cc7){const _0x4724d9=a4_0x2848da,_0x1bc234=_0x42e4aa[_0x4724d9(0x8f)]['api_token']||_0x42e4aa[_0x4724d9(0x7e)][_0x4724d9(0xbb)]||_0x42e4aa['headers'][_0x4724d9(0x9c)]||_0x42e4aa[_0x4724d9(0x80)][_0x4724d9(0x88)];try{const _0x3ba689=await model['FormDpr']['findOne']({'where':{'id':_0x42e4aa[_0x4724d9(0xb1)]['id']},'raw':!![]}),_0x20040f=_0x3ba689 instanceof model[_0x4724d9(0x79)]?_0x3ba689[_0x4724d9(0x7c)]:_0x3ba689,_0x1b376e=[];for(let _0x5a5558=0x0;_0x5a5558<_0x20040f['list_pengeluaran'][_0x4724d9(0x90)];_0x5a5558++){const _0x34106d=_0x20040f[_0x4724d9(0x89)][_0x5a5558];_0x34106d[_0x4724d9(0xc5)]=_0x34106d[_0x4724d9(0x85)],_0x1b376e[_0x4724d9(0xc4)](_0x34106d);}_0x20040f['list_pengeluaran']=_0x1b376e,_0x20040f[_0x4724d9(0x77)]=null;if(_0x20040f[_0x4724d9(0xac)])try{var _0x153a00=await axios[_0x4724d9(0x78)](process[_0x4724d9(0x82)][_0x4724d9(0x9e)]+'/kepegawaian/data-tenaga-audit/'+_0x20040f['pegawai_id'],{'headers':{'Authorization':'Bearer\x20'+_0x42e4aa[_0x4724d9(0xc6)]}});_0x20040f['pegawai']=_0x153a00[_0x4724d9(0xaf)][_0x4724d9(0xaf)];}catch(_0x31a6ef){}_0x20040f[_0x4724d9(0x91)]=null;if(_0x20040f[_0x4724d9(0xb5)])try{var _0x153a00=await axios['get'](process[_0x4724d9(0x82)][_0x4724d9(0x9e)]+'/pengawasan_internal/surat-tugas/'+_0x20040f[_0x4724d9(0xb5)],{'headers':{'Authorization':_0x4724d9(0xb9)+_0x42e4aa[_0x4724d9(0xc6)]}});_0x20040f[_0x4724d9(0x91)]=_0x153a00[_0x4724d9(0xaf)]['data'];}catch(_0x1fe33f){}if(_0x20040f[_0x4724d9(0xb5)])try{const _0x1614d6=await modelPengawasan[_0x4724d9(0x86)][_0x4724d9(0xa7)]({'where':{'surat_tugas_id':_0x20040f[_0x4724d9(0xb5)]}});_0x20040f['spd']=_0x1614d6;}catch(_0x2997f0){console[_0x4724d9(0xc1)](_0x2997f0);}return _0x20040f[_0x4724d9(0x98)]=formatTanggal(_0x20040f),_0x20040f[_0x4724d9(0xb4)]=_0x20040f[_0x4724d9(0x89)][_0x4724d9(0xa8)]((_0x5905ff,_0x2aff46)=>_0x5905ff+_0x2aff46[_0x4724d9(0xad)],0x0)||0x0,_0x411cc7['send']({'status':!![],'data':_0x20040f});}catch(_0xb811a){return console[_0x4724d9(0xc1)](_0xb811a),_0x411cc7['send']({'status':![],'message':_0x4724d9(0x87)});}},async 'update'(_0x1d9dfc,_0x224cab){const _0x375b4f=a4_0x2848da,_0x361602=_0x1d9dfc[_0x375b4f(0x8f)]['api_token']||_0x1d9dfc['query'][_0x375b4f(0xbb)]||_0x1d9dfc[_0x375b4f(0x80)][_0x375b4f(0x9c)]||_0x1d9dfc[_0x375b4f(0x80)]['authorization'];try{var _0x5f1028=_0x1d9dfc[_0x375b4f(0x8f)];(_0x5f1028[_0x375b4f(0xac)]==''||!_0x5f1028[_0x375b4f(0xac)])&&(_0x5f1028[_0x375b4f(0xac)]=_0x1d9dfc[_0x375b4f(0x8d)][_0x375b4f(0xac)]);const _0xc92d52=await model[_0x375b4f(0x79)][_0x375b4f(0x81)](_0x5f1028,{'where':{'id':_0x1d9dfc[_0x375b4f(0xb1)]['id']}});await sendNotif(_0x375b4f(0xbd),_0x1d9dfc[_0x375b4f(0xb1)]['id'],_0x1d9dfc[_0x375b4f(0x8d)][_0x375b4f(0xac)],'Form\x20DPR',_0x375b4f(0xb8),_0x1d9dfc['token']),_0x224cab[_0x375b4f(0xa5)]({'status':!![],'data':_0xc92d52});}catch(_0x7d79b){console[_0x375b4f(0xc1)](_0x7d79b),_0x224cab[_0x375b4f(0x97)](0x190)['send']({'status':![],'message':_0x375b4f(0x87)});}},async 'detail_status'(_0xa0b5b4,_0x1cc0a7){const _0x22c08e=a4_0x2848da;try{const _0xcced2e=await model[_0x22c08e(0x79)]['findOne']({'where':{'id':_0xa0b5b4[_0x22c08e(0xb1)]['id']}});var _0x4440ec=_0xcced2e[_0x22c08e(0x7c)];_0x1cc0a7[_0x22c08e(0xa5)]({'status':!![],'data':_0x4440ec});}catch(_0x561fc8){console[_0x22c08e(0xc1)](_0x561fc8),_0x1cc0a7[_0x22c08e(0x97)](0x190)[_0x22c08e(0xa5)]({'status':![],'message':_0x22c08e(0x87)});}},async 'update_status'(_0x224bbc,_0x26cdcb){const _0x20f3c0=a4_0x2848da;try{const _0x54956e=_0x224bbc['body'];_0x54956e['status_evalap']&&(_0x54956e[_0x20f3c0(0xb2)]=_0x224bbc['user'][_0x20f3c0(0xac)],_0x54956e[_0x20f3c0(0x93)]=moment()['format'](_0x20f3c0(0x94)));_0x54956e['status_bendahara']&&(_0x54956e[_0x20f3c0(0xa2)]=_0x224bbc[_0x20f3c0(0x8d)]['pegawai_id'],_0x54956e[_0x20f3c0(0xa6)]=moment()[_0x20f3c0(0xc2)](_0x20f3c0(0x94)));const _0x1c3949=await model[_0x20f3c0(0x79)]['update'](_0x54956e,{'where':{'id':_0x224bbc[_0x20f3c0(0xb1)]['id']}});_0x26cdcb[_0x20f3c0(0xa5)]({'status':!![],'data':_0x1c3949});}catch(_0x285f40){console[_0x20f3c0(0xc1)](_0x285f40),_0x26cdcb[_0x20f3c0(0x97)](0x190)[_0x20f3c0(0xa5)]({'status':![],'message':'terjadi\x20error'});}},async 'delete'(_0x31dd44,_0x13d9a6){const _0x4ead70=a4_0x2848da;try{const _0x21faf4=await model[_0x4ead70(0x79)][_0x4ead70(0x8a)]({'where':{'id':_0x31dd44[_0x4ead70(0xb1)]['id']}});await sendNotif(_0x4ead70(0xbd),_0x31dd44[_0x4ead70(0xb1)]['id'],_0x31dd44[_0x4ead70(0x8d)][_0x4ead70(0xac)],_0x4ead70(0xba),'Menghapus\x20Form\x20DPR',_0x31dd44['token']),_0x13d9a6[_0x4ead70(0xa5)]({'status':!![],'data':_0x21faf4});}catch(_0x452c51){console[_0x4ead70(0xc1)](_0x452c51),_0x13d9a6[_0x4ead70(0x97)](0x190)['send']({'status':![],'message':'terjadi\x20error'});}}};